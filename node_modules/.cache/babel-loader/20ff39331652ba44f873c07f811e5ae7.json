{"ast":null,"code":"import _classCallCheck from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Button,Div,Panel}from'@vkontakte/vkui';import'../resources/styles/details_styes.css';import ic_comment_outline from\"../resources/icons/ic_comment_outline.svg\";import ic_eye from\"../resources/icons/ic_eye.svg\";import ic_like from\"../resources/icons/ic_like.svg\";import ic_reposts from\"../resources/icons/ic_reposts.svg\";import avatar1 from'../resources/icons/avatar1.png';import avatar2 from'../resources/icons/avatar2.png';import ic_smile_outline from\"../resources/icons/ic_smile_outline.svg\";import{getDatesCount,dateToString}from'../utils/Utils';var Details=/*#__PURE__*/function(_React$Component){_inherits(Details,_React$Component);function Details(props){var _this;_classCallCheck(this,Details);_this=_possibleConstructorReturn(this,_getPrototypeOf(Details).call(this,props));_this.animateProgress=function(){_this.step=_this.props.donation.summ/(Math.random()*(100-60)+60);_this.iteration=0;_this.greenIteration=0;_this.interval=setInterval(_this.animationLoop,50);_this.intervalTop=setInterval(_this.animationLoopTop,50);};_this.animationLoop=function(){if(_this.isAnimate){_this.progress=parseFloat(_this.step*_this.iteration)/_this.props.donation.summ;var progressCount=parseInt(_this.progress*_this.props.donation.summ);var newProgress=_this.progress*_this.progressBg.current.offsetWidth;if(newProgress>_this.progressBg.current.offsetWidth){_this.iteration=0;}else{_this.iteration+=1;}_this.setState({progressWidth:newProgress,progressCount:progressCount});}};_this.animationLoopTop=function(){if(_this.isAnimate){_this.progressTop=parseFloat(_this.step*_this.greenIteration)/_this.props.donation.summ;var progressCount=parseInt(_this.progressTop*_this.props.donation.summ);var newProgress=_this.progressTop*_this.progressBgGreen.current.offsetWidth;if(newProgress>_this.progressBgGreen.current.offsetWidth){_this.greenIteration=0;}else{_this.greenIteration+=1;}_this.setState({progressWidthTop:newProgress,progressPercentsTop:_this.progressTop,progressCountTop:progressCount});if(newProgress>=_this.progressBgGreen.current.offsetWidth){clearInterval(_this.intervalTop);setTimeout(_this.runAnimationLoopTop,2000);}}};_this.runAnimationLoopTop=function(){_this.intervalTop=setInterval(_this.animationLoopTop,50);};_this.state={progressWidth:0,progressWidthTop:0,progressPercentsTop:0,progressCount:0,progressCountTop:0};_this.progressBg=React.createRef();_this.progressBgGreen=React.createRef();_this.isAnimate=true;return _this;}_createClass(Details,[{key:\"componentDidMount\",value:function componentDidMount(){this.animateProgress();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.isAnimate=false;clearInterval(this.interval);clearInterval(this.intervalTop);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"main_content_details\"},React.createElement(\"img\",{src:this.props.donation.image,height:\"140\",className:\"detail_img-responsive\"}),React.createElement(\"div\",{className:\"main_content_details_texts\"},React.createElement(\"p\",{className:\"detail_title\"},this.props.donation.title),React.createElement(\"p\",{className:\"detail_author\"},\"\\u0410\\u0432\\u0442\\u043E\\u0440 \",this.props.donation.name),React.createElement(\"p\",{className:\"detail_date\"},this.props.donation.isTarget?this.props.donation.date>0?\"Закончится через \"+getDatesCount(this.props.donation.date)+\" дн.\":\"Cбор закончится, когда соберём сумму\":\"Помощь нужна каждый месяц\"),React.createElement(\"hr\",{className:\"detail_hr\"}),React.createElement(\"div\",{style:{display:'flex'}},React.createElement(\"p\",{className:\"detail_date2\",style:{margin:'0px 0px 6px 0px'}},this.props.donation.isTarget?this.props.donation.date>0?\"Нужно собрать до \"+dateToString(this.props.donation.date):\"Нужно собрать\":\"Нужно собрать в сентябре\"),React.createElement(\"span\",{style:this.state.progressPercentsTop>=0.7?{display:'block'}:{display:'none'},className:\"detail_box_prog_text_white2\"},this.props.donation.summ,\" \\u20BD\")),React.createElement(\"div\",{ref:this.progressBgGreen,className:\"detail_box\",style:{display:'flex'}},React.createElement(\"div\",{style:{width:this.state.progressWidthTop+\"px\"},className:\"detail_box_green\"},React.createElement(\"span\",{style:this.state.progressPercentsTop<0.25||this.state.progressPercentsTop>=1.0?{display:'none'}:{display:'block'},className:\"detail_box_prog_text_white1\"},this.state.progressCountTop,\" \\u20BD\"),React.createElement(\"span\",{style:this.state.progressPercentsTop>=1.0?{display:'block'}:{display:'none'},className:\"detail_box_prog_text_white_center\"},this.props.donation.summ,\" \\u20BD \\u0441\\u043E\\u0431\\u0440\\u0430\\u043D\\u044B!\")),React.createElement(\"span\",{style:this.state.progressPercentsTop>=0.25?{display:'none'}:{display:'block'},className:\"detail_box_prog_text_white3\"},this.state.progressCountTop,\" \\u20BD\"),React.createElement(\"span\",{style:this.state.progressPercentsTop>=0.7?{display:'none'}:{display:'block'},className:\"detail_box_prog_text_white2\"},this.props.donation.summ,\" \\u20BD\")),React.createElement(\"hr\",{className:\"detail_hr\",style:{margin:'12px 0px 6px 0px'}}),React.createElement(\"p\",{className:\"detail_description\"},this.props.donation.description),React.createElement(\"hr\",{className:\"detail_hr\"}),React.createElement(\"div\",{className:\"detail_counters\"},React.createElement(\"img\",{src:ic_like,width:\"24\",className:\"detail_counters_icon\"}),React.createElement(\"div\",{className:\"detail_counters_text\"},\"65 \"),React.createElement(\"img\",{src:ic_comment_outline,width:\"24\",className:\"detail_counters_icon\"}),React.createElement(\"div\",{className:\"detail_counters_text\"},\"35 \\u20BD\"),React.createElement(\"img\",{src:ic_reposts,width:\"21\",className:\"detail_counters_icon\"}),React.createElement(\"div\",{className:\"detail_counters_text\"},\"3 \"),React.createElement(\"div\",{className:\"detail_counters_right\"},React.createElement(\"img\",{src:ic_eye,width:\"14\",className:\"detail_counters_icon\"}),React.createElement(\"div\",{className:\"detail_counters_text_right\"},\"7K \")))),React.createElement(\"hr\",{className:\"detail_hr\"}),React.createElement(\"div\",{className:\"detail_coment_div\"},React.createElement(\"div\",{style:{display:'flex'},className:\"detail_coment_div2\"},React.createElement(\"img\",{src:avatar1,width:\"36\",height:\"36\"}),React.createElement(\"div\",{style:{display:'block',margin:'0px 0px 0px 8px'}},React.createElement(\"span\",{className:\"detail_coments_name\"},\"\\u0410\\u043B\\u0435\\u043A\\u0441\\u0435\\u0439 \\u041C\\u0430\\u0437\\u0435\\u043B\\u044E\\u043A\"),React.createElement(\"span\",{className:\"detail_coments_time\"},\"5 \\u043C\\u0438\\u043D\"),\" \",React.createElement(\"p\",{className:\"detail_coments_text\"},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\"),\" \"),React.createElement(\"img\",{src:ic_like,width:\"16\",className:\"detail_comment_like\"})),React.createElement(\"div\",{style:{display:'flex'},className:\"detail_coment_div2\"},React.createElement(\"img\",{src:avatar2,width:\"36\",height:\"36\"}),React.createElement(\"div\",{style:{display:'flex'},className:\"detail_coment_div3\"},React.createElement(\"span\",{className:\"detail_coments_edit_text\"},\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"),React.createElement(\"img\",{src:ic_smile_outline,style:{marginRight:\"4px\",height:'24px',marginTop:'5px'},width:\"24\",className:\"detail_comment_like\"})))),React.createElement(\"div\",{className:\"bottom_progress\"},React.createElement(\"div\",{className:\"bottom_progress_line\"}),React.createElement(\"div\",{className:\"snippet_progress\"},React.createElement(\"div\",{className:\"snippen_progress_cont\"},React.createElement(\"p\",{className:\"snippet_progress_title\"},this.state.progressCount==0?\"Помогите первым\":\"Собрано \"+this.state.progressCount+\" ₽ из \"+this.props.donation.summ+\" ₽\"),React.createElement(\"div\",{className:\"relative\"},React.createElement(\"div\",{ref:this.progressBg,className:\"snippet_progress_bg green_bg_progress\"}),React.createElement(\"div\",{style:{width:this.state.progressWidth+\"px\"},className:\"progress_view green_bg_progress\"}))),React.createElement(\"div\",{className:\"snippet_help_btn news_item_help green_help_btn\"},\"\\u041F\\u043E\\u043C\\u043E\\u0447\\u044C\"))));}}]);return Details;}(React.Component);export default Details;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/Details.js"],"names":["React","Button","Div","Panel","avatar1","avatar2","getDatesCount","dateToString","Details","props","animateProgress","step","donation","summ","Math","random","iteration","greenIteration","interval","setInterval","animationLoop","intervalTop","animationLoopTop","isAnimate","progress","parseFloat","progressCount","parseInt","newProgress","progressBg","current","offsetWidth","setState","progressWidth","progressTop","progressBgGreen","progressWidthTop","progressPercentsTop","progressCountTop","clearInterval","setTimeout","runAnimationLoopTop","state","createRef","image","title","name","isTarget","date","display","margin","width","description","ic_like","ic_comment_outline","ic_reposts","ic_eye","ic_smile_outline","marginRight","height","marginTop","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, Div, Panel } from '@vkontakte/vkui';\nimport '../resources/styles/details_styes.css'\n\nimport ic_comment_outline from '../resources/icons/ic_comment_outline.svg'\nimport ic_eye from '../resources/icons/ic_eye.svg'\nimport ic_like from '../resources/icons/ic_like.svg'\nimport ic_reposts from '../resources/icons/ic_reposts.svg'\nimport avatar1 from '../resources/icons/avatar1.png'\nimport avatar2 from '../resources/icons/avatar2.png'\nimport ic_smile_outline from '../resources/icons/ic_smile_outline.svg'\nimport { getDatesCount, dateToString } from '../utils/Utils';\n\n\nclass Details extends React.Component {\n   \n    constructor(props){\n        super(props)\n        this.state = {\n            progressWidth : 0,\n            progressWidthTop : 0,\n            progressPercentsTop : 0,\n            progressCount : 0,\n            progressCountTop : 0,\n            \n        }\n        this.progressBg = React.createRef()\n        this.progressBgGreen = React.createRef()\n        this.isAnimate = true\n    }\n    componentDidMount(){\n        this.animateProgress()\n    }\n    animateProgress = () => {\n        this.step = this.props.donation.summ / (Math.random() * (100 - 60) + 60)\n        this.iteration = 0\n        this.greenIteration = 0\n        this.interval = setInterval(this.animationLoop, 50);\n        this.intervalTop = setInterval(this.animationLoopTop, 50);\n    }\n    animationLoop = () => {\n        if (this.isAnimate){\n            this.progress = parseFloat(this.step*this.iteration) / this.props.donation.summ\n            var progressCount = parseInt(this.progress * this.props.donation.summ)\n            const newProgress = (this.progress * this.progressBg.current.offsetWidth)\n            if (newProgress > this.progressBg.current.offsetWidth){\n                this.iteration = 0\n            } else {\n                this.iteration += 1 \n            }\n            this.setState({progressWidth : newProgress, progressCount : progressCount})\n        }\n    }\n    animationLoopTop = () => {\n        if (this.isAnimate){\n            this.progressTop = parseFloat(this.step*this.greenIteration) / this.props.donation.summ\n            var progressCount = parseInt(this.progressTop * this.props.donation.summ)\n            const newProgress = (this.progressTop * this.progressBgGreen.current.offsetWidth)\n            if (newProgress > this.progressBgGreen.current.offsetWidth){\n                this.greenIteration = 0\n            } else {\n                this.greenIteration += 1 \n            }\n            this.setState({progressWidthTop : newProgress, progressPercentsTop : this.progressTop, progressCountTop : progressCount})\n            if (newProgress >= this.progressBgGreen.current.offsetWidth){\n                clearInterval(this.intervalTop);\n                setTimeout(this.runAnimationLoopTop, 2000);\n            }\n        }\n    }\n    runAnimationLoopTop = () => {\n        this.intervalTop = setInterval(this.animationLoopTop, 50);\n    }\n\n    componentWillUnmount(){\n        this.isAnimate = false\n        clearInterval(this.interval);\n        clearInterval(this.intervalTop);\n    }\n    render() {\n        return (\n            <div className=\"main_content_details\" >\n              <img src={this.props.donation.image} height=\"140\" className=\"detail_img-responsive\"/>\n              <div className=\"main_content_details_texts\" >\n                <p className=\"detail_title\">{this.props.donation.title}</p>\n                <p className=\"detail_author\">Автор {this.props.donation.name}</p>\n                <p className=\"detail_date\">{this.props.donation.isTarget ? this.props.donation.date > 0 ? (\"Закончится через \" + getDatesCount(this.props.donation.date) + \" дн.\") : \"Cбор закончится, когда соберём сумму\" : \"Помощь нужна каждый месяц\"}</p>\n                <hr className=\"detail_hr\"/>\n\n                <div style={{display: 'flex'}}>\n                   <p className=\"detail_date2\" style={{margin: '0px 0px 6px 0px'}}>{this.props.donation.isTarget ? this.props.donation.date > 0 ? (\"Нужно собрать до \" + dateToString(this.props.donation.date)) : \"Нужно собрать\" : \"Нужно собрать в сентябре\"}</p>\n                   <span style={this.state.progressPercentsTop >= 0.7 ? {display : 'block'} : {display : 'none'}} className=\"detail_box_prog_text_white2\">{this.props.donation.summ} ₽</span>\n                </div>\n                <div ref={this.progressBgGreen} className=\"detail_box\" style={{display: 'flex'}}>\n                    <div style={{width : (this.state.progressWidthTop + \"px\")}} className=\"detail_box_green\">\n                          <span style={(this.state.progressPercentsTop < 0.25 || this.state.progressPercentsTop >= 1.0) ? {display : 'none'} : {display : 'block'}} className=\"detail_box_prog_text_white1\">{this.state.progressCountTop} ₽</span>\n                          <span style={this.state.progressPercentsTop >= 1.0 ? {display : 'block'} : {display : 'none'}} className=\"detail_box_prog_text_white_center\">{this.props.donation.summ} ₽ собраны!</span>\n                    </div>\n                    <span style={this.state.progressPercentsTop >= 0.25 ? {display : 'none'} : {display : 'block'}} className=\"detail_box_prog_text_white3\">{this.state.progressCountTop} ₽</span>\n                    <span style={this.state.progressPercentsTop >= 0.7 ? {display : 'none'} : {display : 'block'}} className=\"detail_box_prog_text_white2\">{this.props.donation.summ} ₽</span>\n                </div>\n                \n                <hr className=\"detail_hr\" style={{margin: '12px 0px 6px 0px'}} />\n                <p className=\"detail_description\">{this.props.donation.description}</p>\n                <hr className=\"detail_hr\"/>\n                <div className=\"detail_counters\">\n                    <img src={ic_like} width=\"24\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text\">65 </div>\n                    <img src={ic_comment_outline} width=\"24\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text\">35 ₽</div>\n                    <img src={ic_reposts} width=\"21\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text\">3 </div>\n                    <div className=\"detail_counters_right\">\n                        <img src={ic_eye} width=\"14\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text_right\">7K </div>\n                    </div>\n                </div>\n              </div>\n              <hr className=\"detail_hr\"/>\n              <div className=\"detail_coment_div\">\n                <div style={{display: 'flex'}} className=\"detail_coment_div2\">\n                    <img src={avatar1} width=\"36\" height=\"36\"/><div style={{display: 'block', margin: '0px 0px 0px 8px'}}><span className=\"detail_coments_name\">Алексей Мазелюк</span><span className=\"detail_coments_time\">5 мин</span> <p className=\"detail_coments_text\">Отправил</p> </div>\n                    <img src={ic_like} width=\"16\"className=\"detail_comment_like\" />\n                </div>\n                <div style={{display: 'flex'}} className=\"detail_coment_div2\">\n                    <img src={avatar2} width=\"36\" height=\"36\" />\n                <div style={{display: 'flex'}} className=\"detail_coment_div3\">\n                    <span className=\"detail_coments_edit_text\">Комментарий</span>\n                    <img src={ic_smile_outline} style={{marginRight : \"4px\", height : '24px', marginTop : '5px'}} width=\"24\"className=\"detail_comment_like\" />\n                </div>\n                </div>\n              </div>\n              <div className=\"bottom_progress\">\n                <div className=\"bottom_progress_line\"/>\n                <div className=\"snippet_progress\">\n                    \n                    <div className=\"snippen_progress_cont\">\n                            <p className=\"snippet_progress_title\">{this.state.progressCount == 0 ? \"Помогите первым\" : (\"Собрано \" + this.state.progressCount + \" ₽ из \" + this.props.donation.summ + \" ₽\")}</p>\n                            <div className=\"relative\">\n                                <div ref={this.progressBg} className=\"snippet_progress_bg green_bg_progress\"/>\n                                <div style={{width : (this.state.progressWidth + \"px\")}} className=\"progress_view green_bg_progress\"/>\n                            </div>                            \n                    </div>\n                    <div className=\"snippet_help_btn news_item_help green_help_btn\">Помочь</div>\n                </div>\n              </div>\n              \n            </div>\n\n        );\n    }\n}\nexport default Details;"]},"metadata":{},"sourceType":"module"}