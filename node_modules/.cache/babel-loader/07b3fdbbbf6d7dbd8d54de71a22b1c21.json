{"ast":null,"code":"/*!\n * wavesurfer.js regions plugin 3.2.0 (2019-10-25)\n * https://github.com/katspaugh/wavesurfer.js\n * @license BSD-3-Clause\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(\"regions\", [], t) : \"object\" == typeof exports ? exports.regions = t() : (e.WaveSurfer = e.WaveSurfer || {}, e.WaveSurfer.regions = t());\n}(window, function () {\n  return function (e) {\n    var t = {};\n\n    function r(n) {\n      if (t[n]) return t[n].exports;\n      var i = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports;\n    }\n\n    return r.m = e, r.c = t, r.d = function (e, t, n) {\n      r.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (e, t) {\n      if (1 & t && (e = r(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var i in e) {\n        r.d(n, i, function (t) {\n          return e[t];\n        }.bind(null, i));\n      }\n      return n;\n    }, r.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return r.d(t, \"a\", t), t;\n    }, r.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, r.p = \"localhost:8080/dist/plugin/\", r(r.s = 5);\n  }({\n    5: function _(e, t, r) {\n      \"use strict\";\n\n      function n(e, t) {\n        if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n      }\n\n      function i(e, t) {\n        for (var r = 0; r < t.length; r++) {\n          var n = t[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n        }\n      }\n\n      function a(e, t, r) {\n        return t && i(e.prototype, t), r && i(e, r), e;\n      }\n\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      }), t.default = void 0;\n\n      var s = function () {\n        function e(t, r) {\n          var i = this;\n          n(this, e), this.wavesurfer = r, this.wrapper = r.drawer.wrapper, this.util = r.util, this.style = this.util.style, this.id = null == t.id ? r.util.getId() : t.id, this.start = Number(t.start) || 0, this.end = null == t.end ? this.start + 4 / this.wrapper.scrollWidth * this.wavesurfer.getDuration() : Number(t.end), this.resize = void 0 === t.resize || Boolean(t.resize), this.drag = void 0 === t.drag || Boolean(t.drag), this.isResizing = !1, this.isDragging = !1, this.loop = Boolean(t.loop), this.color = t.color || \"rgba(0, 0, 0, 0.1)\", this.data = t.data || {}, this.attributes = t.attributes || {}, this.maxLength = t.maxLength, this.minLength = t.minLength, this._onRedraw = function () {\n            return i.updateRender();\n          }, this.scroll = !1 !== t.scroll && r.params.scrollParent, this.scrollSpeed = t.scrollSpeed || 1, this.scrollThreshold = t.scrollThreshold || 10, this.bindInOut(), this.render(), this.wavesurfer.on(\"zoom\", this._onRedraw), this.wavesurfer.on(\"redraw\", this._onRedraw), this.wavesurfer.fireEvent(\"region-created\", this);\n        }\n\n        return a(e, [{\n          key: \"update\",\n          value: function value(e) {\n            null != e.start && (this.start = Number(e.start)), null != e.end && (this.end = Number(e.end)), null != e.loop && (this.loop = Boolean(e.loop)), null != e.color && (this.color = e.color), null != e.data && (this.data = e.data), null != e.resize && (this.resize = Boolean(e.resize)), null != e.drag && (this.drag = Boolean(e.drag)), null != e.maxLength && (this.maxLength = Number(e.maxLength)), null != e.minLength && (this.minLength = Number(e.minLength)), null != e.attributes && (this.attributes = e.attributes), this.updateRender(), this.fireEvent(\"update\"), this.wavesurfer.fireEvent(\"region-updated\", this);\n          }\n        }, {\n          key: \"remove\",\n          value: function value() {\n            this.element && (this.wrapper.removeChild(this.element), this.element = null, this.fireEvent(\"remove\"), this.wavesurfer.un(\"zoom\", this._onRedraw), this.wavesurfer.un(\"redraw\", this._onRedraw), this.wavesurfer.fireEvent(\"region-removed\", this));\n          }\n        }, {\n          key: \"play\",\n          value: function value() {\n            this.wavesurfer.play(this.start, this.end), this.fireEvent(\"play\"), this.wavesurfer.fireEvent(\"region-play\", this);\n          }\n        }, {\n          key: \"playLoop\",\n          value: function value() {\n            var e = this;\n            this.play(), this.once(\"out\", function () {\n              return e.playLoop();\n            });\n          }\n        }, {\n          key: \"render\",\n          value: function value() {\n            var e = document.createElement(\"region\");\n\n            for (var t in e.className = \"wavesurfer-region\", e.title = this.formatTime(this.start, this.end), e.setAttribute(\"data-id\", this.id), this.attributes) {\n              e.setAttribute(\"data-region-\" + t, this.attributes[t]);\n            }\n\n            if (this.style(e, {\n              position: \"absolute\",\n              zIndex: 2,\n              height: \"100%\",\n              top: \"0px\"\n            }), this.resize) {\n              var r = e.appendChild(document.createElement(\"handle\")),\n                  n = e.appendChild(document.createElement(\"handle\"));\n              r.className = \"wavesurfer-handle wavesurfer-handle-start\", n.className = \"wavesurfer-handle wavesurfer-handle-end\";\n              var i = {\n                cursor: \"col-resize\",\n                position: \"absolute\",\n                top: \"0px\",\n                width: \"1%\",\n                maxWidth: \"4px\",\n                height: \"100%\"\n              };\n              this.style(r, i), this.style(r, {\n                left: \"0px\"\n              }), this.style(n, i), this.style(n, {\n                right: \"0px\"\n              });\n            }\n\n            this.element = this.wrapper.appendChild(e), this.updateRender(), this.bindEvents(e);\n          }\n        }, {\n          key: \"formatTime\",\n          value: function value(e, t) {\n            return (e == t ? [e] : [e, t]).map(function (e) {\n              return [Math.floor(e % 3600 / 60), (\"00\" + Math.floor(e % 60)).slice(-2)].join(\":\");\n            }).join(\"-\");\n          }\n        }, {\n          key: \"getWidth\",\n          value: function value() {\n            return this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;\n          }\n        }, {\n          key: \"updateRender\",\n          value: function value() {\n            var e = this.wavesurfer.getDuration(),\n                t = this.getWidth(),\n                r = this.start,\n                n = this.end;\n\n            if (r < 0 && (n -= r = 0), n > e && (r = e - ((n = e) - r)), null != this.minLength && (n = Math.max(r + this.minLength, n)), null != this.maxLength && (n = Math.min(r + this.maxLength, n)), null != this.element) {\n              var i = Math.round(r / e * t),\n                  a = Math.round(n / e * t) - i;\n\n              for (var s in this.style(this.element, {\n                left: i + \"px\",\n                width: a + \"px\",\n                backgroundColor: this.color,\n                cursor: this.drag ? \"move\" : \"default\"\n              }), this.attributes) {\n                this.element.setAttribute(\"data-region-\" + s, this.attributes[s]);\n              }\n\n              this.element.title = this.formatTime(this.start, this.end);\n            }\n          }\n        }, {\n          key: \"bindInOut\",\n          value: function value() {\n            var e = this;\n            this.firedIn = !1, this.firedOut = !1;\n\n            var t = function t(_t) {\n              var r = Math.round(10 * e.start) / 10,\n                  n = Math.round(10 * e.end) / 10;\n              _t = Math.round(10 * _t) / 10, !e.firedOut && e.firedIn && (r > _t || n <= _t) && (e.firedOut = !0, e.firedIn = !1, e.fireEvent(\"out\"), e.wavesurfer.fireEvent(\"region-out\", e)), !e.firedIn && r <= _t && n > _t && (e.firedIn = !0, e.firedOut = !1, e.fireEvent(\"in\"), e.wavesurfer.fireEvent(\"region-in\", e));\n            };\n\n            this.wavesurfer.backend.on(\"audioprocess\", t), this.on(\"remove\", function () {\n              e.wavesurfer.backend.un(\"audioprocess\", t);\n            }), this.on(\"out\", function () {\n              e.loop && e.wavesurfer.play(e.start);\n            });\n          }\n        }, {\n          key: \"bindEvents\",\n          value: function value() {\n            var e,\n                t,\n                r,\n                n,\n                i,\n                a,\n                s,\n                o,\n                u,\n                l,\n                d,\n                h,\n                c,\n                f,\n                v = this;\n            this.element.addEventListener(\"mouseenter\", function (e) {\n              v.fireEvent(\"mouseenter\", e), v.wavesurfer.fireEvent(\"region-mouseenter\", v, e);\n            }), this.element.addEventListener(\"mouseleave\", function (e) {\n              v.fireEvent(\"mouseleave\", e), v.wavesurfer.fireEvent(\"region-mouseleave\", v, e);\n            }), this.element.addEventListener(\"click\", function (e) {\n              e.preventDefault(), v.fireEvent(\"click\", e), v.wavesurfer.fireEvent(\"region-click\", v, e);\n            }), this.element.addEventListener(\"dblclick\", function (e) {\n              e.stopPropagation(), e.preventDefault(), v.fireEvent(\"dblclick\", e), v.wavesurfer.fireEvent(\"region-dblclick\", v, e);\n            }), (this.drag || this.resize) && (o = v.wavesurfer.drawer.container, u = v.scrollSpeed, l = v.scrollThreshold, d = !1, h = function h(a) {\n              var o = v.wavesurfer.getDuration();\n              a.touches && a.touches.length > 1 || (t = a.targetTouches ? a.targetTouches[0].identifier : null, (v.drag || v.resize) && a.stopPropagation(), e = v.wavesurfer.regions.util.getRegionSnapToGridValue(v.wavesurfer.drawer.handleEvent(a, !0) * o), n = v.wrapper.scrollWidth - v.wrapper.clientWidth, s = v.wrapper.getBoundingClientRect(), v.isResizing = !1, v.isDragging = !1, \"handle\" === a.target.tagName.toLowerCase() ? (v.isResizing = !0, i = a.target.classList.contains(\"wavesurfer-handle-start\") ? \"start\" : \"end\") : (v.isDragging = !0, r = !0, i = !1));\n            }, c = function c(e) {\n              e.touches && e.touches.length > 1 || ((r || i) && (v.isDragging = !1, v.isResizing = !1, r = !1, a = null, i = !1), d && (d = !1, v.util.preventClick(), v.fireEvent(\"update-end\", e), v.wavesurfer.fireEvent(\"region-update-end\", v, e)));\n            }, f = function f(h) {\n              var c = v.wavesurfer.getDuration();\n\n              if (!(h.touches && h.touches.length > 1) && (!h.targetTouches || h.targetTouches[0].identifier == t) && (r || i)) {\n                var f = e,\n                    p = v.wavesurfer.regions.util.getRegionSnapToGridValue(v.wavesurfer.drawer.handleEvent(h) * c),\n                    g = p - e;\n\n                if (e = p, v.drag && r && (d = d || !!g, v.onDrag(g)), v.resize && i && (d = d || !!g, v.onResize(g, i)), v.scroll && o.clientWidth < v.wrapper.scrollWidth) {\n                  if (r) {\n                    var m = v.element.getBoundingClientRect(),\n                        w = m.left - s.left;\n                    p < f && w >= 0 ? a = -1 : p > f && w + m.width <= s.right && (a = 1), (-1 === a && w > l || 1 === a && w + m.width < s.right - l) && (a = null);\n                  } else {\n                    var y = h.clientX - s.left;\n                    a = y <= l ? -1 : y >= s.right - l ? 1 : null;\n                  }\n\n                  a && function t(s) {\n                    var o = v.wavesurfer.getDuration();\n\n                    if (a && (r || i)) {\n                      var l = v.wrapper.scrollLeft + u * a;\n                      v.wrapper.scrollLeft = l = Math.min(n, Math.max(0, l));\n                      var d = v.wavesurfer.regions.util.getRegionSnapToGridValue(v.wavesurfer.drawer.handleEvent(s) * o),\n                          h = d - e;\n                      e = d, r ? v.onDrag(h) : v.onResize(h, i), window.requestAnimationFrame(function () {\n                        t(s);\n                      });\n                    }\n                  }(h);\n                }\n              }\n            }, v.element.addEventListener(\"mousedown\", h), v.element.addEventListener(\"touchstart\", h), v.wrapper.addEventListener(\"mousemove\", f), v.wrapper.addEventListener(\"touchmove\", f), document.body.addEventListener(\"mouseup\", c), document.body.addEventListener(\"touchend\", c), v.on(\"remove\", function () {\n              document.body.removeEventListener(\"mouseup\", c), document.body.removeEventListener(\"touchend\", c), v.wrapper.removeEventListener(\"mousemove\", f), v.wrapper.removeEventListener(\"touchmove\", f);\n            }), v.wavesurfer.on(\"destroy\", function () {\n              document.body.removeEventListener(\"mouseup\", c), document.body.removeEventListener(\"touchend\", c);\n            }));\n          }\n        }, {\n          key: \"onDrag\",\n          value: function value(e) {\n            var t = this.wavesurfer.getDuration();\n            this.end + e > t || this.start + e < 0 || this.update({\n              start: this.start + e,\n              end: this.end + e\n            });\n          }\n        }, {\n          key: \"onResize\",\n          value: function value(e, t) {\n            \"start\" === t ? this.update({\n              start: Math.min(this.start + e, this.end),\n              end: Math.max(this.start + e, this.end)\n            }) : this.update({\n              start: Math.min(this.end + e, this.start),\n              end: Math.max(this.end + e, this.start)\n            });\n          }\n        }]), e;\n      }(),\n          o = function () {\n        function e(t, r) {\n          var i = this;\n          n(this, e), this.params = t, this.wavesurfer = r, this.util = r.util, this.util.getRegionSnapToGridValue = function (e) {\n            return i.getRegionSnapToGridValue(e, t);\n          }, Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(function (e) {\n            s.prototype[e] = i.util.Observer.prototype[e];\n          }), this.wavesurfer.Region = s, this._onBackendCreated = function () {\n            i.wrapper = i.wavesurfer.drawer.wrapper, i.params.regions && i.params.regions.forEach(function (e) {\n              i.add(e);\n            });\n          }, this.list = {}, this._onReady = function () {\n            i.wrapper = i.wavesurfer.drawer.wrapper, i.params.dragSelection && i.enableDragSelection(i.params), Object.keys(i.list).forEach(function (e) {\n              i.list[e].updateRender();\n            });\n          };\n        }\n\n        return a(e, null, [{\n          key: \"create\",\n          value: function value(t) {\n            return {\n              name: \"regions\",\n              deferInit: !(!t || !t.deferInit) && t.deferInit,\n              params: t,\n              staticProps: {\n                addRegion: function addRegion(e) {\n                  return this.initialisedPluginList.regions || this.initPlugin(\"regions\"), this.regions.add(e);\n                },\n                clearRegions: function clearRegions() {\n                  this.regions && this.regions.clear();\n                },\n                enableDragSelection: function enableDragSelection(e) {\n                  this.initialisedPluginList.regions || this.initPlugin(\"regions\"), this.regions.enableDragSelection(e);\n                },\n                disableDragSelection: function disableDragSelection() {\n                  this.regions.disableDragSelection();\n                }\n              },\n              instance: e\n            };\n          }\n        }]), a(e, [{\n          key: \"init\",\n          value: function value() {\n            this.wavesurfer.isReady ? (this._onBackendCreated(), this._onReady()) : (this.wavesurfer.once(\"ready\", this._onReady), this.wavesurfer.once(\"backend-created\", this._onBackendCreated));\n          }\n        }, {\n          key: \"destroy\",\n          value: function value() {\n            this.wavesurfer.un(\"ready\", this._onReady), this.wavesurfer.un(\"backend-created\", this._onBackendCreated), this.disableDragSelection(), this.clear();\n          }\n        }, {\n          key: \"add\",\n          value: function value(e) {\n            var t = this,\n                r = new this.wavesurfer.Region(e, this.wavesurfer);\n            return this.list[r.id] = r, r.on(\"remove\", function () {\n              delete t.list[r.id];\n            }), r;\n          }\n        }, {\n          key: \"clear\",\n          value: function value() {\n            var e = this;\n            Object.keys(this.list).forEach(function (t) {\n              e.list[t].remove();\n            });\n          }\n        }, {\n          key: \"enableDragSelection\",\n          value: function value(e) {\n            var t,\n                r,\n                n,\n                i,\n                a,\n                s,\n                o,\n                u = this,\n                l = e.slop || 2,\n                d = this.wavesurfer.drawer.container,\n                h = !1 !== e.scroll && this.wavesurfer.params.scrollParent,\n                c = e.scrollSpeed || 1,\n                f = e.scrollThreshold || 10,\n                v = this.wavesurfer.getDuration(),\n                p = 0,\n                g = function g(e) {\n              e.touches && e.touches.length > 1 || (v = u.wavesurfer.getDuration(), a = e.targetTouches ? e.targetTouches[0].identifier : null, r = u.wrapper.scrollWidth - u.wrapper.clientWidth, o = u.wrapper.getBoundingClientRect(), t = !0, n = u.wavesurfer.drawer.handleEvent(e, !0), i = null, s = null);\n            };\n\n            this.wrapper.addEventListener(\"mousedown\", g), this.wrapper.addEventListener(\"touchstart\", g), this.on(\"disable-drag-selection\", function () {\n              u.wrapper.removeEventListener(\"touchstart\", g), u.wrapper.removeEventListener(\"mousedown\", g);\n            });\n\n            var m = function m(e) {\n              e.touches && e.touches.length > 1 || (t = !1, p = 0, s = null, i && (u.util.preventClick(), i.fireEvent(\"update-end\", e), u.wavesurfer.fireEvent(\"region-update-end\", i, e)), i = null);\n            };\n\n            this.wrapper.addEventListener(\"mouseup\", m), this.wrapper.addEventListener(\"touchend\", m), document.body.addEventListener(\"mouseup\", m), document.body.addEventListener(\"touchend\", m), this.on(\"disable-drag-selection\", function () {\n              document.body.removeEventListener(\"mouseup\", m), document.body.removeEventListener(\"touchend\", m), u.wrapper.removeEventListener(\"touchend\", m), u.wrapper.removeEventListener(\"mouseup\", m);\n            });\n\n            var w = function w(g) {\n              if (t && !(++p <= l || g.touches && g.touches.length > 1 || g.targetTouches && g.targetTouches[0].identifier != a)) {\n                i || (i = u.add(e || {}));\n                var m = u.wavesurfer.drawer.handleEvent(g),\n                    w = u.wavesurfer.regions.util.getRegionSnapToGridValue(n * v),\n                    y = u.wavesurfer.regions.util.getRegionSnapToGridValue(m * v);\n\n                if (i.update({\n                  start: Math.min(y, w),\n                  end: Math.max(y, w)\n                }), h && d.clientWidth < u.wrapper.scrollWidth) {\n                  var b = g.clientX - o.left;\n                  (s = b <= f ? -1 : b >= o.right - f ? 1 : null) && function e(t) {\n                    if (i && s) {\n                      var a = u.wrapper.scrollLeft + c * s;\n                      u.wrapper.scrollLeft = a = Math.min(r, Math.max(0, a));\n                      var o = u.wavesurfer.drawer.handleEvent(t);\n                      i.update({\n                        start: Math.min(o * v, n * v),\n                        end: Math.max(o * v, n * v)\n                      }), a < r && a > 0 && window.requestAnimationFrame(function () {\n                        e(t);\n                      });\n                    }\n                  }(g);\n                }\n              }\n            };\n\n            this.wrapper.addEventListener(\"mousemove\", w), this.wrapper.addEventListener(\"touchmove\", w), this.on(\"disable-drag-selection\", function () {\n              u.wrapper.removeEventListener(\"touchmove\", w), u.wrapper.removeEventListener(\"mousemove\", w);\n            });\n          }\n        }, {\n          key: \"disableDragSelection\",\n          value: function value() {\n            this.fireEvent(\"disable-drag-selection\");\n          }\n        }, {\n          key: \"getCurrentRegion\",\n          value: function value() {\n            var e = this,\n                t = this.wavesurfer.getCurrentTime(),\n                r = null;\n            return Object.keys(this.list).forEach(function (n) {\n              var i = e.list[n];\n              i.start <= t && i.end >= t && (!r || i.end - i.start < r.end - r.start) && (r = i);\n            }), r;\n          }\n        }, {\n          key: \"getRegionSnapToGridValue\",\n          value: function value(e, t) {\n            if (t.snapToGridInterval) {\n              var r = t.snapToGridOffset || 0;\n              return Math.round((e - r) / t.snapToGridInterval) * t.snapToGridInterval + r;\n            }\n\n            return e;\n          }\n        }]), e;\n      }();\n\n      t.default = o, e.exports = t.default;\n    }\n  });\n});","map":{"version":3,"sources":["webpack://WaveSurfer.[name]/webpack/universalModuleDefinition","webpack://WaveSurfer.[name]/webpack/bootstrap","webpack://WaveSurfer.[name]/src/plugin/regions.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Region","params","ws","this","wavesurfer","wrapper","drawer","util","style","id","getId","start","Number","end","scrollWidth","getDuration","resize","undefined","Boolean","drag","isResizing","isDragging","loop","color","data","attributes","maxLength","minLength","_onRedraw","updateRender","scroll","scrollParent","scrollSpeed","scrollThreshold","bindInOut","render","on","fireEvent","element","removeChild","un","play","once","playLoop","regionEl","document","createElement","className","title","formatTime","setAttribute","attrname","position","zIndex","height","top","handleLeft","appendChild","handleRight","css","cursor","width","maxWidth","left","right","bindEvents","map","Math","floor","time","slice","join","pixelRatio","dur","getWidth","startLimited","endLimited","max","min","round","regionWidth","backgroundColor","firedIn","firedOut","onProcess","backend","addEventListener","e","preventDefault","stopPropagation","container","startTime","touchId","maxScroll","updated","scrollDirection","wrapperRect","edgeScroll","duration","scrollLeft","regions","getRegionSnapToGridValue","handleEvent","delta","onDrag","onResize","requestAnimationFrame","onDown","touches","length","targetTouches","identifier","clientWidth","getBoundingClientRect","target","tagName","toLowerCase","classList","contains","onUp","preventClick","onMove","oldTime","regionRect","x","clientX","body","removeEventListener","maxEnd","update","direction","RegionsPlugin","deferInit","staticProps","addRegion","options","initialisedPluginList","initPlugin","add","clearRegions","clear","enableDragSelection","disableDragSelection","instance","getOwnPropertyNames","Observer","forEach","_onBackendCreated","region","list","_onReady","dragSelection","keys","isReady","remove","slop","pxMove","eventDown","eventUp","eventMove","startUpdate","endUpdate","getCurrentTime","cur","snapToGridInterval","offset","snapToGridOffset"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"regions\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"regions\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"regions\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"localhost:8080/dist/plugin/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","/**\n * (Single) Region plugin class\n *\n * Must be turned into an observer before instantiating. This is done in\n * `RegionsPlugin` (main plugin class).\n *\n * @extends {Observer}\n */\nclass Region {\n    constructor(params, ws) {\n        this.wavesurfer = ws;\n        this.wrapper = ws.drawer.wrapper;\n        this.util = ws.util;\n        this.style = this.util.style;\n\n        this.id = params.id == null ? ws.util.getId() : params.id;\n        this.start = Number(params.start) || 0;\n        this.end =\n            params.end == null\n                ? // small marker-like region\n                  this.start +\n                  (4 / this.wrapper.scrollWidth) * this.wavesurfer.getDuration()\n                : Number(params.end);\n        this.resize =\n            params.resize === undefined ? true : Boolean(params.resize);\n        this.drag = params.drag === undefined ? true : Boolean(params.drag);\n        // reflect resize and drag state of region for region-updated listener\n        this.isResizing = false;\n        this.isDragging = false;\n        this.loop = Boolean(params.loop);\n        this.color = params.color || 'rgba(0, 0, 0, 0.1)';\n        this.data = params.data || {};\n        this.attributes = params.attributes || {};\n\n        this.maxLength = params.maxLength;\n        this.minLength = params.minLength;\n        this._onRedraw = () => this.updateRender();\n\n        this.scroll = params.scroll !== false && ws.params.scrollParent;\n        this.scrollSpeed = params.scrollSpeed || 1;\n        this.scrollThreshold = params.scrollThreshold || 10;\n\n        this.bindInOut();\n        this.render();\n        this.wavesurfer.on('zoom', this._onRedraw);\n        this.wavesurfer.on('redraw', this._onRedraw);\n        this.wavesurfer.fireEvent('region-created', this);\n    }\n\n    /* Update region params. */\n    update(params) {\n        if (null != params.start) {\n            this.start = Number(params.start);\n        }\n        if (null != params.end) {\n            this.end = Number(params.end);\n        }\n        if (null != params.loop) {\n            this.loop = Boolean(params.loop);\n        }\n        if (null != params.color) {\n            this.color = params.color;\n        }\n        if (null != params.data) {\n            this.data = params.data;\n        }\n        if (null != params.resize) {\n            this.resize = Boolean(params.resize);\n        }\n        if (null != params.drag) {\n            this.drag = Boolean(params.drag);\n        }\n        if (null != params.maxLength) {\n            this.maxLength = Number(params.maxLength);\n        }\n        if (null != params.minLength) {\n            this.minLength = Number(params.minLength);\n        }\n        if (null != params.attributes) {\n            this.attributes = params.attributes;\n        }\n\n        this.updateRender();\n        this.fireEvent('update');\n        this.wavesurfer.fireEvent('region-updated', this);\n    }\n\n    /* Remove a single region. */\n    remove() {\n        if (this.element) {\n            this.wrapper.removeChild(this.element);\n            this.element = null;\n            this.fireEvent('remove');\n            this.wavesurfer.un('zoom', this._onRedraw);\n            this.wavesurfer.un('redraw', this._onRedraw);\n            this.wavesurfer.fireEvent('region-removed', this);\n        }\n    }\n\n    /* Play the audio region. */\n    play() {\n        this.wavesurfer.play(this.start, this.end);\n        this.fireEvent('play');\n        this.wavesurfer.fireEvent('region-play', this);\n    }\n\n    /* Play the region in loop. */\n    playLoop() {\n        this.play();\n        this.once('out', () => this.playLoop());\n    }\n\n    /* Render a region as a DOM element. */\n    render() {\n        const regionEl = document.createElement('region');\n        regionEl.className = 'wavesurfer-region';\n        regionEl.title = this.formatTime(this.start, this.end);\n        regionEl.setAttribute('data-id', this.id);\n\n        for (const attrname in this.attributes) {\n            regionEl.setAttribute(\n                'data-region-' + attrname,\n                this.attributes[attrname]\n            );\n        }\n\n        this.style(regionEl, {\n            position: 'absolute',\n            zIndex: 2,\n            height: '100%',\n            top: '0px'\n        });\n\n        /* Resize handles */\n        if (this.resize) {\n            const handleLeft = regionEl.appendChild(\n                document.createElement('handle')\n            );\n            const handleRight = regionEl.appendChild(\n                document.createElement('handle')\n            );\n            handleLeft.className = 'wavesurfer-handle wavesurfer-handle-start';\n            handleRight.className = 'wavesurfer-handle wavesurfer-handle-end';\n            const css = {\n                cursor: 'col-resize',\n                position: 'absolute',\n                top: '0px',\n                width: '1%',\n                maxWidth: '4px',\n                height: '100%'\n            };\n            this.style(handleLeft, css);\n            this.style(handleLeft, {\n                left: '0px'\n            });\n            this.style(handleRight, css);\n            this.style(handleRight, {\n                right: '0px'\n            });\n        }\n\n        this.element = this.wrapper.appendChild(regionEl);\n        this.updateRender();\n        this.bindEvents(regionEl);\n    }\n\n    formatTime(start, end) {\n        return (start == end ? [start] : [start, end])\n            .map(time =>\n                [\n                    Math.floor((time % 3600) / 60), // minutes\n                    ('00' + Math.floor(time % 60)).slice(-2) // seconds\n                ].join(':')\n            )\n            .join('-');\n    }\n\n    getWidth() {\n        return this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;\n    }\n\n    /* Update element's position, width, color. */\n    updateRender() {\n        // duration varies during loading process, so don't overwrite important data\n        const dur = this.wavesurfer.getDuration();\n        const width = this.getWidth();\n\n        var startLimited = this.start;\n        var endLimited = this.end;\n        if (startLimited < 0) {\n            startLimited = 0;\n            endLimited = endLimited - startLimited;\n        }\n        if (endLimited > dur) {\n            endLimited = dur;\n            startLimited = dur - (endLimited - startLimited);\n        }\n\n        if (this.minLength != null) {\n            endLimited = Math.max(startLimited + this.minLength, endLimited);\n        }\n\n        if (this.maxLength != null) {\n            endLimited = Math.min(startLimited + this.maxLength, endLimited);\n        }\n\n        if (this.element != null) {\n            // Calculate the left and width values of the region such that\n            // no gaps appear between regions.\n            const left = Math.round((startLimited / dur) * width);\n            const regionWidth = Math.round((endLimited / dur) * width) - left;\n\n            this.style(this.element, {\n                left: left + 'px',\n                width: regionWidth + 'px',\n                backgroundColor: this.color,\n                cursor: this.drag ? 'move' : 'default'\n            });\n\n            for (const attrname in this.attributes) {\n                this.element.setAttribute(\n                    'data-region-' + attrname,\n                    this.attributes[attrname]\n                );\n            }\n\n            this.element.title = this.formatTime(this.start, this.end);\n        }\n    }\n\n    /* Bind audio events. */\n    bindInOut() {\n        this.firedIn = false;\n        this.firedOut = false;\n\n        const onProcess = time => {\n            let start = Math.round(this.start * 10) / 10;\n            let end = Math.round(this.end * 10) / 10;\n            time = Math.round(time * 10) / 10;\n\n            if (\n                !this.firedOut &&\n                this.firedIn &&\n                (start > time || end <= time)\n            ) {\n                this.firedOut = true;\n                this.firedIn = false;\n                this.fireEvent('out');\n                this.wavesurfer.fireEvent('region-out', this);\n            }\n            if (!this.firedIn && start <= time && end > time) {\n                this.firedIn = true;\n                this.firedOut = false;\n                this.fireEvent('in');\n                this.wavesurfer.fireEvent('region-in', this);\n            }\n        };\n\n        this.wavesurfer.backend.on('audioprocess', onProcess);\n\n        this.on('remove', () => {\n            this.wavesurfer.backend.un('audioprocess', onProcess);\n        });\n\n        /* Loop playback. */\n        this.on('out', () => {\n            if (this.loop) {\n                this.wavesurfer.play(this.start);\n            }\n        });\n    }\n\n    /* Bind DOM events. */\n    bindEvents() {\n        this.element.addEventListener('mouseenter', e => {\n            this.fireEvent('mouseenter', e);\n            this.wavesurfer.fireEvent('region-mouseenter', this, e);\n        });\n\n        this.element.addEventListener('mouseleave', e => {\n            this.fireEvent('mouseleave', e);\n            this.wavesurfer.fireEvent('region-mouseleave', this, e);\n        });\n\n        this.element.addEventListener('click', e => {\n            e.preventDefault();\n            this.fireEvent('click', e);\n            this.wavesurfer.fireEvent('region-click', this, e);\n        });\n\n        this.element.addEventListener('dblclick', e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this.fireEvent('dblclick', e);\n            this.wavesurfer.fireEvent('region-dblclick', this, e);\n        });\n\n        /* Drag or resize on mousemove. */\n        (this.drag || this.resize) &&\n            (() => {\n                const container = this.wavesurfer.drawer.container;\n                const scrollSpeed = this.scrollSpeed;\n                const scrollThreshold = this.scrollThreshold;\n                let startTime;\n                let touchId;\n                let drag;\n                let maxScroll;\n                let resize;\n                let updated = false;\n                let scrollDirection;\n                let wrapperRect;\n\n                // Scroll when the user is dragging within the threshold\n                const edgeScroll = e => {\n                    const duration = this.wavesurfer.getDuration();\n                    if (!scrollDirection || (!drag && !resize)) {\n                        return;\n                    }\n\n                    // Update scroll position\n                    let scrollLeft =\n                        this.wrapper.scrollLeft + scrollSpeed * scrollDirection;\n                    this.wrapper.scrollLeft = scrollLeft = Math.min(\n                        maxScroll,\n                        Math.max(0, scrollLeft)\n                    );\n\n                    // Get the currently selected time according to the mouse position\n                    const time = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                        this.wavesurfer.drawer.handleEvent(e) * duration\n                    );\n                    const delta = time - startTime;\n                    startTime = time;\n\n                    // Continue dragging or resizing\n                    drag ? this.onDrag(delta) : this.onResize(delta, resize);\n\n                    // Repeat\n                    window.requestAnimationFrame(() => {\n                        edgeScroll(e);\n                    });\n                };\n\n                const onDown = e => {\n                    const duration = this.wavesurfer.getDuration();\n                    if (e.touches && e.touches.length > 1) {\n                        return;\n                    }\n                    touchId = e.targetTouches\n                        ? e.targetTouches[0].identifier\n                        : null;\n\n                    // stop the event propagation, if this region is resizable or draggable\n                    // and the event is therefore handled here.\n                    if (this.drag || this.resize) {\n                        e.stopPropagation();\n                    }\n\n                    // Store the selected startTime we begun dragging or resizing\n                    startTime = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                        this.wavesurfer.drawer.handleEvent(e, true) * duration\n                    );\n\n                    // Store for scroll calculations\n                    maxScroll =\n                        this.wrapper.scrollWidth - this.wrapper.clientWidth;\n                    wrapperRect = this.wrapper.getBoundingClientRect();\n\n                    this.isResizing = false;\n                    this.isDragging = false;\n                    if (e.target.tagName.toLowerCase() === 'handle') {\n                        this.isResizing = true;\n                        if (\n                            e.target.classList.contains(\n                                'wavesurfer-handle-start'\n                            )\n                        ) {\n                            resize = 'start';\n                        } else {\n                            resize = 'end';\n                        }\n                    } else {\n                        this.isDragging = true;\n                        drag = true;\n                        resize = false;\n                    }\n                };\n                const onUp = e => {\n                    if (e.touches && e.touches.length > 1) {\n                        return;\n                    }\n\n                    if (drag || resize) {\n                        this.isDragging = false;\n                        this.isResizing = false;\n                        drag = false;\n                        scrollDirection = null;\n                        resize = false;\n                    }\n\n                    if (updated) {\n                        updated = false;\n                        this.util.preventClick();\n                        this.fireEvent('update-end', e);\n                        this.wavesurfer.fireEvent('region-update-end', this, e);\n                    }\n                };\n                const onMove = e => {\n                    const duration = this.wavesurfer.getDuration();\n\n                    if (e.touches && e.touches.length > 1) {\n                        return;\n                    }\n                    if (\n                        e.targetTouches &&\n                        e.targetTouches[0].identifier != touchId\n                    ) {\n                        return;\n                    }\n\n                    if (drag || resize) {\n                        const oldTime = startTime;\n                        const time = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                            this.wavesurfer.drawer.handleEvent(e) * duration\n                        );\n\n                        const delta = time - startTime;\n                        startTime = time;\n\n                        // Drag\n                        if (this.drag && drag) {\n                            updated = updated || !!delta;\n                            this.onDrag(delta);\n                        }\n\n                        // Resize\n                        if (this.resize && resize) {\n                            updated = updated || !!delta;\n                            this.onResize(delta, resize);\n                        }\n\n                        if (\n                            this.scroll &&\n                            container.clientWidth < this.wrapper.scrollWidth\n                        ) {\n                            if (drag) {\n                                // The threshold is not between the mouse and the container edge\n                                // but is between the region and the container edge\n                                const regionRect = this.element.getBoundingClientRect();\n                                let x = regionRect.left - wrapperRect.left;\n\n                                // Check direction\n                                if (time < oldTime && x >= 0) {\n                                    scrollDirection = -1;\n                                } else if (\n                                    time > oldTime &&\n                                    x + regionRect.width <= wrapperRect.right\n                                ) {\n                                    scrollDirection = 1;\n                                }\n\n                                // Check that we are still beyond the threshold\n                                if (\n                                    (scrollDirection === -1 &&\n                                        x > scrollThreshold) ||\n                                    (scrollDirection === 1 &&\n                                        x + regionRect.width <\n                                            wrapperRect.right - scrollThreshold)\n                                ) {\n                                    scrollDirection = null;\n                                }\n                            } else {\n                                // Mouse based threshold\n                                let x = e.clientX - wrapperRect.left;\n\n                                // Check direction\n                                if (x <= scrollThreshold) {\n                                    scrollDirection = -1;\n                                } else if (\n                                    x >=\n                                    wrapperRect.right - scrollThreshold\n                                ) {\n                                    scrollDirection = 1;\n                                } else {\n                                    scrollDirection = null;\n                                }\n                            }\n\n                            scrollDirection && edgeScroll(e);\n                        }\n                    }\n                };\n\n                this.element.addEventListener('mousedown', onDown);\n                this.element.addEventListener('touchstart', onDown);\n\n                this.wrapper.addEventListener('mousemove', onMove);\n                this.wrapper.addEventListener('touchmove', onMove);\n\n                document.body.addEventListener('mouseup', onUp);\n                document.body.addEventListener('touchend', onUp);\n\n                this.on('remove', () => {\n                    document.body.removeEventListener('mouseup', onUp);\n                    document.body.removeEventListener('touchend', onUp);\n                    this.wrapper.removeEventListener('mousemove', onMove);\n                    this.wrapper.removeEventListener('touchmove', onMove);\n                });\n\n                this.wavesurfer.on('destroy', () => {\n                    document.body.removeEventListener('mouseup', onUp);\n                    document.body.removeEventListener('touchend', onUp);\n                });\n            })();\n    }\n\n    onDrag(delta) {\n        const maxEnd = this.wavesurfer.getDuration();\n        if (this.end + delta > maxEnd || this.start + delta < 0) {\n            return;\n        }\n\n        this.update({\n            start: this.start + delta,\n            end: this.end + delta\n        });\n    }\n\n    onResize(delta, direction) {\n        if (direction === 'start') {\n            this.update({\n                start: Math.min(this.start + delta, this.end),\n                end: Math.max(this.start + delta, this.end)\n            });\n        } else {\n            this.update({\n                start: Math.min(this.end + delta, this.start),\n                end: Math.max(this.end + delta, this.start)\n            });\n        }\n    }\n}\n\n/**\n * @typedef {Object} RegionsPluginParams\n * @property {?boolean} dragSelection Enable creating regions by dragging with\n * the mouse\n * @property {?RegionParams[]} regions Regions that should be added upon\n * initialisation\n * @property {number} slop=2 The sensitivity of the mouse dragging\n * @property {?number} snapToGridInterval Snap the regions to a grid of the specified multiples in seconds\n * @property {?number} snapToGridOffset Shift the snap-to-grid by the specified seconds. May also be negative.\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('regions')`\n */\n\n/**\n * @typedef {Object} RegionParams\n * @desc The parameters used to describe a region.\n * @example wavesurfer.addRegion(regionParams);\n * @property {string} id=→random The id of the region\n * @property {number} start=0 The start position of the region (in seconds).\n * @property {number} end=0 The end position of the region (in seconds).\n * @property {?boolean} loop Whether to loop the region when played back.\n * @property {boolean} drag=true Allow/disallow dragging the region.\n * @property {boolean} resize=true Allow/disallow resizing the region.\n * @property {string} [color='rgba(0, 0, 0, 0.1)'] HTML color code.\n */\n\n/**\n * Regions are visual overlays on waveform that can be used to play and loop\n * portions of audio. Regions can be dragged and resized.\n *\n * Visual customization is possible via CSS (using the selectors\n * `.wavesurfer-region` and `.wavesurfer-handle`).\n *\n * @implements {PluginClass}\n * @extends {Observer}\n *\n * @example\n * // es6\n * import RegionsPlugin from 'wavesurfer.regions.js';\n *\n * // commonjs\n * var RegionsPlugin = require('wavesurfer.regions.js');\n *\n * // if you are using <script> tags\n * var RegionsPlugin = window.WaveSurfer.regions;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     RegionsPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class RegionsPlugin {\n    /**\n     * Regions plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param {RegionsPluginParams} params parameters use to initialise the plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'regions',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                addRegion(options) {\n                    if (!this.initialisedPluginList.regions) {\n                        this.initPlugin('regions');\n                    }\n                    return this.regions.add(options);\n                },\n\n                clearRegions() {\n                    this.regions && this.regions.clear();\n                },\n\n                enableDragSelection(options) {\n                    if (!this.initialisedPluginList.regions) {\n                        this.initPlugin('regions');\n                    }\n                    this.regions.enableDragSelection(options);\n                },\n\n                disableDragSelection() {\n                    this.regions.disableDragSelection();\n                }\n            },\n            instance: RegionsPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = ws.util;\n        this.util.getRegionSnapToGridValue = value => {\n            return this.getRegionSnapToGridValue(value, params);\n        };\n\n        // turn the plugin instance into an observer\n        const observerPrototypeKeys = Object.getOwnPropertyNames(\n            this.util.Observer.prototype\n        );\n        observerPrototypeKeys.forEach(key => {\n            Region.prototype[key] = this.util.Observer.prototype[key];\n        });\n        this.wavesurfer.Region = Region;\n\n        this._onBackendCreated = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            if (this.params.regions) {\n                this.params.regions.forEach(region => {\n                    this.add(region);\n                });\n            }\n        };\n\n        // Id-based hash of regions\n        this.list = {};\n        this._onReady = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            if (this.params.dragSelection) {\n                this.enableDragSelection(this.params);\n            }\n            Object.keys(this.list).forEach(id => {\n                this.list[id].updateRender();\n            });\n        };\n    }\n\n    init() {\n        // Check if ws is ready\n        if (this.wavesurfer.isReady) {\n            this._onBackendCreated();\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n            this.wavesurfer.once('backend-created', this._onBackendCreated);\n        }\n    }\n\n    destroy() {\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('backend-created', this._onBackendCreated);\n        this.disableDragSelection();\n        this.clear();\n    }\n\n    /**\n     * Add a region\n     *\n     * @param {object} params Region parameters\n     * @return {Region} The created region\n     */\n    add(params) {\n        const region = new this.wavesurfer.Region(params, this.wavesurfer);\n\n        this.list[region.id] = region;\n\n        region.on('remove', () => {\n            delete this.list[region.id];\n        });\n\n        return region;\n    }\n\n    /**\n     * Remove all regions\n     */\n    clear() {\n        Object.keys(this.list).forEach(id => {\n            this.list[id].remove();\n        });\n    }\n\n    enableDragSelection(params) {\n        const slop = params.slop || 2;\n        const container = this.wavesurfer.drawer.container;\n        const scroll =\n            params.scroll !== false && this.wavesurfer.params.scrollParent;\n        const scrollSpeed = params.scrollSpeed || 1;\n        const scrollThreshold = params.scrollThreshold || 10;\n        let drag;\n        let duration = this.wavesurfer.getDuration();\n        let maxScroll;\n        let start;\n        let region;\n        let touchId;\n        let pxMove = 0;\n        let scrollDirection;\n        let wrapperRect;\n\n        // Scroll when the user is dragging within the threshold\n        const edgeScroll = e => {\n            if (!region || !scrollDirection) {\n                return;\n            }\n\n            // Update scroll position\n            let scrollLeft =\n                this.wrapper.scrollLeft + scrollSpeed * scrollDirection;\n            this.wrapper.scrollLeft = scrollLeft = Math.min(\n                maxScroll,\n                Math.max(0, scrollLeft)\n            );\n\n            // Update range\n            const end = this.wavesurfer.drawer.handleEvent(e);\n            region.update({\n                start: Math.min(end * duration, start * duration),\n                end: Math.max(end * duration, start * duration)\n            });\n\n            // Check that there is more to scroll and repeat\n            if (scrollLeft < maxScroll && scrollLeft > 0) {\n                window.requestAnimationFrame(() => {\n                    edgeScroll(e);\n                });\n            }\n        };\n\n        const eventDown = e => {\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n            duration = this.wavesurfer.getDuration();\n            touchId = e.targetTouches ? e.targetTouches[0].identifier : null;\n\n            // Store for scroll calculations\n            maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n            wrapperRect = this.wrapper.getBoundingClientRect();\n\n            drag = true;\n            start = this.wavesurfer.drawer.handleEvent(e, true);\n            region = null;\n            scrollDirection = null;\n        };\n        this.wrapper.addEventListener('mousedown', eventDown);\n        this.wrapper.addEventListener('touchstart', eventDown);\n        this.on('disable-drag-selection', () => {\n            this.wrapper.removeEventListener('touchstart', eventDown);\n            this.wrapper.removeEventListener('mousedown', eventDown);\n        });\n\n        const eventUp = e => {\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n\n            drag = false;\n            pxMove = 0;\n            scrollDirection = null;\n\n            if (region) {\n                this.util.preventClick();\n                region.fireEvent('update-end', e);\n                this.wavesurfer.fireEvent('region-update-end', region, e);\n            }\n\n            region = null;\n        };\n        this.wrapper.addEventListener('mouseup', eventUp);\n        this.wrapper.addEventListener('touchend', eventUp);\n\n        document.body.addEventListener('mouseup', eventUp);\n        document.body.addEventListener('touchend', eventUp);\n        this.on('disable-drag-selection', () => {\n            document.body.removeEventListener('mouseup', eventUp);\n            document.body.removeEventListener('touchend', eventUp);\n            this.wrapper.removeEventListener('touchend', eventUp);\n            this.wrapper.removeEventListener('mouseup', eventUp);\n        });\n\n        const eventMove = e => {\n            if (!drag) {\n                return;\n            }\n            if (++pxMove <= slop) {\n                return;\n            }\n\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n            if (e.targetTouches && e.targetTouches[0].identifier != touchId) {\n                return;\n            }\n\n            if (!region) {\n                region = this.add(params || {});\n            }\n\n            const end = this.wavesurfer.drawer.handleEvent(e);\n            const startUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                start * duration\n            );\n            const endUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                end * duration\n            );\n            region.update({\n                start: Math.min(endUpdate, startUpdate),\n                end: Math.max(endUpdate, startUpdate)\n            });\n\n            // If scrolling is enabled\n            if (scroll && container.clientWidth < this.wrapper.scrollWidth) {\n                // Check threshold based on mouse\n                const x = e.clientX - wrapperRect.left;\n                if (x <= scrollThreshold) {\n                    scrollDirection = -1;\n                } else if (x >= wrapperRect.right - scrollThreshold) {\n                    scrollDirection = 1;\n                } else {\n                    scrollDirection = null;\n                }\n                scrollDirection && edgeScroll(e);\n            }\n        };\n        this.wrapper.addEventListener('mousemove', eventMove);\n        this.wrapper.addEventListener('touchmove', eventMove);\n        this.on('disable-drag-selection', () => {\n            this.wrapper.removeEventListener('touchmove', eventMove);\n            this.wrapper.removeEventListener('mousemove', eventMove);\n        });\n    }\n\n    disableDragSelection() {\n        this.fireEvent('disable-drag-selection');\n    }\n\n    /**\n     * Get current region\n     *\n     * The smallest region that contains the current time. If several such\n     * regions exist, take the first. Return `null` if none exist.\n     *\n     * @returns {Region} The current region\n     */\n    getCurrentRegion() {\n        const time = this.wavesurfer.getCurrentTime();\n        let min = null;\n        Object.keys(this.list).forEach(id => {\n            const cur = this.list[id];\n            if (cur.start <= time && cur.end >= time) {\n                if (!min || cur.end - cur.start < min.end - min.start) {\n                    min = cur;\n                }\n            }\n        });\n\n        return min;\n    }\n\n    /**\n     * Match the value to the grid, if required\n     *\n     * If the regions plugin params have a snapToGridInterval set, return the\n     * value matching the nearest grid interval. If no snapToGridInterval is set,\n     * the passed value will be returned without modification.\n     *\n     * @param {number} value the value to snap to the grid, if needed\n     * @param {Object} params the regions plugin params\n     * @returns {number} value\n     */\n    getRegionSnapToGridValue(value, params) {\n        if (params.snapToGridInterval) {\n            // the regions should snap to a grid\n            const offset = params.snapToGridOffset || 0;\n            return (\n                Math.round((value - offset) / params.snapToGridInterval) *\n                    params.snapToGridInterval +\n                offset\n            );\n        }\n\n        // no snap-to-grid\n        return value;\n    }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}