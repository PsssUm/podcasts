{"ast":null,"code":"var _jsxFileName = \"/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/PhotoPicker.js\";\nimport React from 'react';\nimport pickture from \"../../resources/icons/pickture.svg\";\nimport dismiss from \"../../resources/icons/dismiss.svg\";\nimport { FormLayout, File } from '@vkontakte/vkui';\nvar img = new Image();\nvar fr = new FileReader();\n\nclass PhotoPicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showImage = file => {\n      fr.onload = this.onLoadedFileReader;\n      fr.readAsDataURL(file);\n    };\n\n    this.onLoadedFileReader = () => {\n      img.onload = this.onImgLoaded;\n      img.src = fr.result;\n    };\n\n    this.onImgLoaded = () => {\n      this.setState({\n        pickedImageSrc: img.src\n      });\n      this.props.photoPicked(img.src);\n    };\n\n    this.state = {\n      pickedImageSrc: undefined\n    };\n    this.fileUpload = React.createRef();\n    this.pickImage = this.pickImage.bind(this);\n    this.fileChangedHandler = this.fileChangedHandler.bind(this);\n    this.onDismiss = this.onDismiss.bind(this);\n  }\n\n  pickImage() {\n    this.fileUpload.current.click();\n  }\n\n  fileChangedHandler(event) {\n    if (event && event.target.files && event.target.files.length > 0) {\n      this.showImage(event.target.files[0]);\n    }\n  }\n\n  onDismiss() {\n    this.setState({\n      pickedImageSrc: undefined\n    });\n    this.props.photoPicked(undefined);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"photo_picker_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"fileInput\",\n      className: \"custom-file-input hover\",\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: this.fileChangedHandler,\n      style: {\n        display: \"none\"\n      },\n      ref: this.fileUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }), this.state.pickedImageSrc == undefined ? React.createElement(\"div\", {\n      onClick: this.pickImage,\n      className: \"photo_picker\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"center flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: pickture,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"photo_text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u043E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0443\"))) : React.createElement(\"div\", {\n      className: \"picked_img_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"picked_image\",\n      src: this.state.pickedImageSrc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      onClick: this.onDismiss,\n      className: \"dismiss_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"dismiss_img\",\n      src: dismiss,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default PhotoPicker;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/PhotoPicker.js"],"names":["React","FormLayout","File","img","Image","fr","FileReader","PhotoPicker","Component","constructor","props","showImage","file","onload","onLoadedFileReader","readAsDataURL","onImgLoaded","src","result","setState","pickedImageSrc","photoPicked","state","undefined","fileUpload","createRef","pickImage","bind","fileChangedHandler","onDismiss","current","click","event","target","files","length","render","display","pickture","dismiss"],"mappings":"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","sourcesContent":["import React from 'react';\nimport pickture from '../../resources/icons/pickture.svg'\nimport dismiss from '../../resources/icons/dismiss.svg'\nimport { FormLayout, File} from '@vkontakte/vkui';\nvar img = new Image; \nvar fr = new FileReader;\nclass PhotoPicker extends React.Component {\n   \n    constructor(props){\n        super(props)\n        this.state = {\n            pickedImageSrc : undefined\n        }\n        this.fileUpload = React.createRef();\n        this.pickImage = this.pickImage.bind(this);\n        this.fileChangedHandler = this.fileChangedHandler.bind(this);\n        this.onDismiss = this.onDismiss.bind(this);\n    }\n    pickImage() {\n        this.fileUpload.current.click();\n    }\n    fileChangedHandler(event) {\n        if(event && event.target.files && event.target.files.length > 0){\n            this.showImage(event.target.files[0])\n        }\n    }\n    showImage = (file) => {\n        fr.onload = this.onLoadedFileReader\n        fr.readAsDataURL(file);\n    }\n    onLoadedFileReader = () => {\n        img.onload = this.onImgLoaded\n        img.src = fr.result;\n    }\n    onImgLoaded = () => {\n        this.setState({pickedImageSrc : img.src})\n        this.props.photoPicked(img.src)\n    }\n    onDismiss(){\n        this.setState({pickedImageSrc : undefined})\n        this.props.photoPicked(undefined)\n    }\n    render() {\n        return (\n            <div className=\"photo_picker_container\">\n                {/* <FormLayout>\n        <File>\n        \n        </File>\n      </FormLayout> */}\n               <input id=\"fileInput\" className=\"custom-file-input hover\" type=\"file\" accept=\"image/*\" onChange={this.fileChangedHandler} style={{ display: \"none\" }} ref={this.fileUpload}/>\n               {this.state.pickedImageSrc == undefined ? <div onClick={this.pickImage} className=\"photo_picker\">\n                    <div className=\"center flex\">\n                        <img src={pickture}/>\n                        <p className=\"photo_text\">Загрузить обложку</p>\n                    </div>\n               </div> : \n               <div className=\"picked_img_container\">\n                    <img className=\"picked_image\" src={this.state.pickedImageSrc}/>\n                    <div onClick={this.onDismiss} className=\"dismiss_container\">\n                        <img className=\"dismiss_img\" src={dismiss}/>\n                    </div>\n               </div>}\n            </div>\n        );\n    }\n}\nexport default PhotoPicker;"]},"metadata":{},"sourceType":"module"}