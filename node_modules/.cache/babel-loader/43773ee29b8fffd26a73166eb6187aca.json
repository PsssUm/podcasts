{"ast":null,"code":"import _objectSpread from \"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/WaveFormExample.js\";\nimport React, { useCallback, useEffect, useRef, useState, useMemo } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\nimport { WaveSurfer, WaveForm, Region } from \"wavesurfer-react\";\nimport RegionsPlugin from \"wavesurfer.js/dist/plugin/wavesurfer.regions.min\";\nimport TimelinePlugin from \"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\";\n\nfunction generateNum(min, max) {\n  return Math.random() * (max - min + 1) + min;\n}\n\nconst Button = styled.button``;\n/**\n * @param distance\n * @param min\n * @param max\n * @returns {([*, *]|[*, *])|*[]}\n */\n\nfunction generateTwoNumsWithDistance(distance, min, max) {\n  const num1 = generateNum(min, max);\n  const num2 = generateNum(min, max); // if num2 - num1 < 10\n\n  if (num2 - num1 >= 10) {\n    return [num1, num2];\n  }\n\n  return generateTwoNumsWithDistance(distance, min, max);\n}\n\nexport function WaveformExample(props) {\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        timelineVis = _useState2[0],\n        setTimelineVis = _useState2[1];\n\n  const plugins = useMemo(() => {\n    return [{\n      plugin: RegionsPlugin,\n      options: {\n        height: '26px'\n      }\n    }, timelineVis && {\n      plugin: TimelinePlugin,\n      options: {\n        container: \"#timeline\"\n      }\n    }].filter(Boolean);\n  }, [timelineVis]);\n  const toggleTimeline = useCallback(() => {\n    setTimelineVis(!timelineVis);\n  }, [timelineVis]);\n\n  const _useState3 = useState([{\n    id: \"region-1\",\n    start: 0.5,\n    end: 10,\n    color: \"rgba(0, 0, 0, .5)\",\n    data: {\n      systemRegionId: 31\n    }\n  }, {\n    id: \"region-2\",\n    start: 5,\n    end: 25,\n    color: \"rgba(225, 195, 100, .5)\",\n    data: {\n      systemRegionId: 32\n    }\n  }, {\n    id: \"region-3\",\n    start: 15,\n    end: 35,\n    color: \"rgba(25, 95, 195, .5)\",\n    data: {\n      systemRegionId: 33\n    }\n  }]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        regions = _useState4[0],\n        setRegions = _useState4[1]; // use regions ref to pass it inside useCallback\n  // so it will use always the most fresh version of regions list\n\n\n  const regionsRef = useRef(regions);\n  useEffect(() => {\n    regionsRef.current = regions;\n  }, [regions]);\n  const regionCreatedHandler = useCallback(region => {\n    console.log(\"region-created --> region:\", region);\n    if (region.data.systemRegionId) return;\n    setRegions([...regionsRef.current, _objectSpread({}, region, {\n      data: _objectSpread({}, region.data, {\n        systemRegionId: -1\n      })\n    })]);\n  }, [regionsRef]);\n  const wavesurferRef = useRef();\n  const handlePosChange = useCallback(position => {\n    console.log(\"position = \" + position);\n  });\n  const handleWSMount = useCallback(waveSurfer => {\n    wavesurferRef.current = waveSurfer;\n\n    if (wavesurferRef.current) {\n      wavesurferRef.current.load(\"https://www.mfiles.co.uk/mp3-downloads/gs-cd-track2.mp3\");\n      wavesurferRef.current.on(\"ready\", () => {\n        console.log(\"WaveSurfer is ready\");\n        wavesurferRef.current.play();\n      });\n      wavesurferRef.current.on(\"region-removed\", region => {\n        console.log(\"region-removed --> \", region);\n      });\n      wavesurferRef.current.on(\"loading\", data => {\n        console.log(\"loading --> \", data);\n      });\n\n      if (window) {\n        window.surferidze = wavesurferRef.current;\n      }\n    }\n  }, [regionCreatedHandler]);\n  const play = useCallback(() => {\n    wavesurferRef.current.playPause();\n  }, []);\n\n  if (wavesurferRef.current != undefined) {\n    if (props.isPlaying) {\n      wavesurferRef.current.play();\n    } else {\n      wavesurferRef.current.pause();\n    }\n  }\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(WaveSurfer, {\n    onPosChange: handlePosChange,\n    plugins: plugins,\n    onMount: handleWSMount,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"timeline_bg\",\n    id: \"timeline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }), React.createElement(WaveForm, {\n    barWidth: 2,\n    barRadius: 1,\n    barGap: 3,\n    cursorWidth: 2,\n    height: 96,\n    progressColor: \"#3F8AE0\",\n    responsive: true,\n    loopSelection: true,\n    waveColor: \"#3F8AE0\",\n    cursorColor: \"#FF3347\",\n    id: \"waveform\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: play,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \"Play / Pause\")));\n}","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/WaveFormExample.js"],"names":["React","useCallback","useEffect","useRef","useState","useMemo","ReactDOM","styled","WaveSurfer","WaveForm","Region","RegionsPlugin","TimelinePlugin","generateNum","min","max","Math","random","Button","button","generateTwoNumsWithDistance","distance","num1","num2","WaveformExample","props","timelineVis","setTimelineVis","plugins","plugin","options","height","container","filter","Boolean","toggleTimeline","id","start","end","color","data","systemRegionId","regions","setRegions","regionsRef","current","regionCreatedHandler","region","console","log","wavesurferRef","handlePosChange","position","handleWSMount","waveSurfer","load","on","play","window","surferidze","playPause","undefined","isPlaying","pause"],"mappings":"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","sourcesContent":["import React, {\n    useCallback,\n    useEffect,\n    useRef,\n    useState,\n    useMemo\n  } from \"react\";\n  import ReactDOM from \"react-dom\";\n  import styled from \"styled-components\";\n  import { WaveSurfer, WaveForm, Region } from \"wavesurfer-react\";\n  import RegionsPlugin from \"wavesurfer.js/dist/plugin/wavesurfer.regions.min\";\n  import TimelinePlugin from \"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\";\n  \n\n  function generateNum(min, max) {\n    return Math.random() * (max - min + 1) + min;\n  }\n  const Button = styled.button``;\n  \n  /**\n   * @param distance\n   * @param min\n   * @param max\n   * @returns {([*, *]|[*, *])|*[]}\n   */\n  function generateTwoNumsWithDistance(distance, min, max) {\n    const num1 = generateNum(min, max);\n    const num2 = generateNum(min, max);\n    // if num2 - num1 < 10\n    if (num2 - num1 >= 10) {\n      return [num1, num2];\n    }\n    return generateTwoNumsWithDistance(distance, min, max);\n  }\n  \n  export function WaveformExample(props) {\n    const [timelineVis, setTimelineVis] = useState(true);\n   \n    const plugins = useMemo(() => {\n      return [\n        {\n          plugin: RegionsPlugin,\n          options: {\n            height : '26px'\n          }\n        },\n        timelineVis && {\n          plugin: TimelinePlugin,\n          options: {\n            container: \"#timeline\"\n          }\n        }\n      ].filter(Boolean);\n    }, [timelineVis]);\n  \n    const toggleTimeline = useCallback(() => {\n      setTimelineVis(!timelineVis);\n    }, [timelineVis]);\n    \n    const [regions, setRegions] = useState([\n      {\n        id: \"region-1\",\n        start: 0.5,\n        end: 10,\n        color: \"rgba(0, 0, 0, .5)\",\n        data: {\n          systemRegionId: 31\n        }\n      },\n      {\n        id: \"region-2\",\n        start: 5,\n        end: 25,\n        color: \"rgba(225, 195, 100, .5)\",\n        data: {\n          systemRegionId: 32\n        }\n      },\n      {\n        id: \"region-3\",\n        start: 15,\n        end: 35,\n        color: \"rgba(25, 95, 195, .5)\",\n        data: {\n          systemRegionId: 33\n        }\n      }\n    ]);\n  \n    // use regions ref to pass it inside useCallback\n    // so it will use always the most fresh version of regions list\n    const regionsRef = useRef(regions);\n  \n    useEffect(() => {\n      regionsRef.current = regions;\n    }, [regions]);\n  \n    const regionCreatedHandler = useCallback(\n      region => {\n        console.log(\"region-created --> region:\", region);\n  \n        if (region.data.systemRegionId) return;\n  \n        setRegions([\n          ...regionsRef.current,\n          { ...region, data: { ...region.data, systemRegionId: -1 } }\n        ]);\n      },\n      [regionsRef]\n    );\n  \n    const wavesurferRef = useRef();\n    const handlePosChange = useCallback(position => {\n\n    \n        console.log(\"position = \" + position)\n\n    })\n    const handleWSMount = useCallback(\n      waveSurfer => {\n        wavesurferRef.current = waveSurfer;\n        if (wavesurferRef.current) {\n          wavesurferRef.current.load(\"https://www.mfiles.co.uk/mp3-downloads/gs-cd-track2.mp3\");\n  \n  \n          wavesurferRef.current.on(\"ready\", () => {\n            console.log(\"WaveSurfer is ready\");\n            wavesurferRef.current.play()\n          });\n  \n          wavesurferRef.current.on(\"region-removed\", region => {\n            console.log(\"region-removed --> \", region);\n          });\n  \n          wavesurferRef.current.on(\"loading\", data => {\n            console.log(\"loading --> \", data);\n          });\n  \n          if (window) {\n            window.surferidze = wavesurferRef.current;\n          }\n        }\n        \n      },\n      [regionCreatedHandler]\n    );\n     \n    const play = useCallback(() => {\n      wavesurferRef.current.playPause();\n    }, []);\n    if (wavesurferRef.current != undefined){\n        if (props.isPlaying){\n            wavesurferRef.current.play()\n        } else {\n            wavesurferRef.current.pause()\n        }\n    }\n   \n    return (\n        \n      <div className=\"App\">\n           \n        <WaveSurfer onPosChange={handlePosChange} plugins={plugins} onMount={handleWSMount}>\n          <div className=\"timeline_bg\" id=\"timeline\" />\n          <WaveForm \n                    barWidth={2}\n                    barRadius={1}\n                    barGap={3}\n                    cursorWidth={2}\n                    height={96} progressColor={\"#3F8AE0\"} responsive={true} loopSelection={true} waveColor={\"#3F8AE0\"} cursorColor={\"#FF3347\"}  id=\"waveform\">\n            \n          </WaveForm>\n          <Button onClick={play}>Play / Pause</Button>\n        </WaveSurfer>\n        \n      </div>\n    );\n  }"]},"metadata":{},"sourceType":"module"}