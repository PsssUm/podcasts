{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport getClassName from '../../helpers/getClassName';\nimport transitionEvents from '../../lib/transitionEvents';\nimport { IS_PLATFORM_ANDROID } from '../../lib/platform';\nvar baseClassName = getClassName('Root');\n\nvar Root =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Root, _React$Component);\n\n  function Root(props) {\n    var _this;\n\n    _classCallCheck(this, Root);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Root).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"onAnimationEnd\", function () {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        manual: true\n      };\n\n      if (['root-android-animation-hide-back', 'root-android-animation-show-forward', 'root-ios-animation-hide-back', 'root-ios-animation-show-forward'].indexOf(e.animationName) > -1 || e.manual) {\n        var isBack = _this.state.isBack;\n        var prevView = _this.state.prevView;\n        var nextView = _this.state.nextView;\n\n        _this.setState({\n          activeView: nextView,\n          prevView: null,\n          nextView: null,\n          visibleViews: [nextView],\n          transition: false,\n          isBack: undefined\n        }, function () {\n          isBack ? _this.window.scrollTo(0, _this.state.scrolls[_this.state.activeView]) : _this.window.scrollTo(0, 0);\n          _this.props.onTransition && _this.props.onTransition({\n            isBack: isBack,\n            from: prevView,\n            to: nextView\n          });\n        });\n      }\n    });\n\n    _this.state = {\n      activeView: props.activeView,\n      prevView: null,\n      nextView: null,\n      visibleViews: [props.activeView],\n      isBack: undefined,\n      scrolls: {}\n    };\n    return _this;\n  }\n\n  _createClass(Root, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      if (this.props.popout && !prevProps.popout) {\n        this.blurActiveElement();\n      }\n\n      if (this.props.activeView !== prevProps.activeView) {\n        var pageYOffset = this.window.pageYOffset;\n        var firstLayerId = prevProps.children.find(function (view) {\n          return view.props.id === prevProps.activeView || view.props.id === _this2.props.activeView;\n        }).props.id;\n        var isBack = firstLayerId === this.props.activeView;\n        this.blurActiveElement();\n        var nextView = this.props.activeView;\n        var prevView = prevProps.activeView;\n        this.setState({\n          scrolls: _objectSpread({}, this.state.scrolls, _defineProperty({}, prevProps.activeView, pageYOffset)),\n          transition: true,\n          activeView: null,\n          nextView: nextView,\n          prevView: prevView,\n          visibleViews: [nextView, prevView],\n          isBack: isBack\n        });\n      }\n\n      if (!prevState.transition && this.state.transition) {\n        var prevViewElement = this.document.getElementById(\"view-\".concat(this.state.prevView));\n        var nextViewElement = this.document.getElementById(\"view-\".concat(this.state.nextView));\n        prevViewElement.querySelector('.View__panel').scrollTop = this.state.scrolls[this.state.prevView];\n\n        if (this.state.isBack) {\n          nextViewElement.querySelector('.View__panel').scrollTop = this.state.scrolls[this.state.nextView];\n        }\n\n        this.waitAnimationFinish(this.state.isBack ? prevViewElement : nextViewElement, this.onAnimationEnd);\n      }\n    }\n  }, {\n    key: \"waitAnimationFinish\",\n    value: function waitAnimationFinish(elem, eventHandler) {\n      if (transitionEvents.supported) {\n        var eventName = transitionEvents.prefix ? transitionEvents.prefix + 'AnimationEnd' : 'animationend';\n        elem.removeEventListener(eventName, eventHandler);\n        elem.addEventListener(eventName, eventHandler);\n      } else {\n        setTimeout(eventHandler.bind(this), IS_PLATFORM_ANDROID ? 300 : 600);\n      }\n    }\n  }, {\n    key: \"blurActiveElement\",\n    value: function blurActiveElement() {\n      if (typeof this.window !== 'undefined' && this.document.activeElement) {\n        this.document.activeElement.blur();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          popout = _this$props.popout,\n          modal = _this$props.modal;\n      var _this$state = this.state,\n          transition = _this$state.transition,\n          isBack = _this$state.isBack,\n          prevView = _this$state.prevView,\n          activeView = _this$state.activeView,\n          nextView = _this$state.nextView;\n      var Views = this.arrayChildren.filter(function (View) {\n        return _this3.state.visibleViews.indexOf(View.props.id) >= 0;\n      });\n      return React.createElement(\"div\", {\n        className: classNames(baseClassName, this.props.className, {\n          'Root--transition': transition\n        })\n      }, Views.map(function (View) {\n        return React.createElement(\"div\", {\n          key: View.props.id,\n          id: \"view-\".concat(View.props.id),\n          className: classNames('Root__view', {\n            'Root__view--hide-back': View.props.id === prevView && isBack,\n            'Root__view--hide-forward': View.props.id === prevView && !isBack,\n            'Root__view--show-back': View.props.id === nextView && isBack,\n            'Root__view--show-forward': View.props.id === nextView && !isBack,\n            'Root__view--active': View.props.id === activeView\n          })\n        }, View);\n      }), !!popout && React.createElement(\"div\", {\n        className: \"Root__popout\"\n      }, popout), !!modal && React.createElement(\"div\", {\n        className: \"Root__modal\"\n      }, modal));\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.context.document || document;\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.context.window || window;\n    }\n  }, {\n    key: \"arrayChildren\",\n    get: function get() {\n      return [].concat(this.props.children);\n    }\n  }]);\n\n  return Root;\n}(React.Component);\n\n_defineProperty(Root, \"propTypes\", {\n  className: PropTypes.string,\n  activeView: PropTypes.string.isRequired,\n  popout: PropTypes.node,\n  modal: PropTypes.node,\n  onTransition: PropTypes.func,\n  children: PropTypes.node\n});\n\n_defineProperty(Root, \"defaultProps\", {\n  popout: null\n});\n\n_defineProperty(Root, \"contextTypes\", {\n  window: PropTypes.any,\n  document: PropTypes.any\n});\n\nexport { Root as default };","map":{"version":3,"sources":["../../../../src/components/Root/Root.js"],"names":["baseClassName","getClassName","Root","React","Component","activeView","props","prevView","nextView","visibleViews","isBack","scrolls","className","PropTypes","popout","modal","onTransition","children","node","window","document","any","prevProps","prevState","pageYOffset","firstLayerId","view","transition","prevViewElement","nextViewElement","elem","eventHandler","transitionEvents","eventName","setTimeout","IS_PLATFORM_ANDROID","e","manual","undefined","from","to","Views","View","classNames"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport getClassName from '../../helpers/getClassName';\n\nimport transitionEvents from '../../lib/transitionEvents';\nimport { IS_PLATFORM_ANDROID } from '../../lib/platform';\n\nconst baseClassName = getClassName('Root');\n\nexport default class Root extends React.Component {\n  constructor (props) {\n    super();\n\n    this.state = {\n      activeView: props.activeView,\n      prevView: null,\n      nextView: null,\n      visibleViews: [props.activeView],\n      isBack: undefined,\n      scrolls: {}\n    };\n  }\n\n  static propTypes = {\n    className: PropTypes.string,\n    activeView: PropTypes.string.isRequired,\n    popout: PropTypes.node,\n    modal: PropTypes.node,\n    onTransition: PropTypes.func,\n    children: PropTypes.node\n  };\n\n  static defaultProps = {\n    popout: null\n  };\n\n  static contextTypes = {\n    window: PropTypes.any,\n    document: PropTypes.any\n  };\n\n  get document () {\n    return this.context.document || document;\n  }\n\n  get window () {\n    return this.context.window || window;\n  }\n\n  get arrayChildren () {\n    return [].concat(this.props.children);\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (this.props.popout && !prevProps.popout) {\n      this.blurActiveElement();\n    }\n\n    if (this.props.activeView !== prevProps.activeView) {\n      let pageYOffset = this.window.pageYOffset;\n      const firstLayerId = prevProps.children.find(view => {\n        return view.props.id === prevProps.activeView || view.props.id === this.props.activeView;\n      }).props.id;\n      const isBack = firstLayerId === this.props.activeView;\n\n      this.blurActiveElement();\n\n      const nextView = this.props.activeView;\n      const prevView = prevProps.activeView;\n\n      this.setState({\n        scrolls: {\n          ...this.state.scrolls,\n          [prevProps.activeView]: pageYOffset\n        },\n        transition: true,\n        activeView: null,\n        nextView,\n        prevView,\n        visibleViews: [nextView, prevView],\n        isBack\n      });\n    }\n\n    if (!prevState.transition && this.state.transition) {\n      const prevViewElement = this.document.getElementById(`view-${this.state.prevView}`);\n      const nextViewElement = this.document.getElementById(`view-${this.state.nextView}`);\n\n      prevViewElement.querySelector('.View__panel').scrollTop = this.state.scrolls[this.state.prevView];\n\n      if (this.state.isBack) {\n        nextViewElement.querySelector('.View__panel').scrollTop = this.state.scrolls[this.state.nextView];\n      }\n      this.waitAnimationFinish(this.state.isBack ? prevViewElement : nextViewElement, this.onAnimationEnd);\n    }\n  }\n\n  waitAnimationFinish (elem, eventHandler) {\n    if (transitionEvents.supported) {\n      const eventName = transitionEvents.prefix ? transitionEvents.prefix + 'AnimationEnd' : 'animationend';\n\n      elem.removeEventListener(eventName, eventHandler);\n      elem.addEventListener(eventName, eventHandler);\n    } else {\n      setTimeout(eventHandler.bind(this), IS_PLATFORM_ANDROID ? 300 : 600);\n    }\n  }\n\n  onAnimationEnd = (e = { manual: true }) => {\n    if ([\n      'root-android-animation-hide-back',\n      'root-android-animation-show-forward',\n      'root-ios-animation-hide-back',\n      'root-ios-animation-show-forward'\n    ].indexOf(e.animationName) > -1 || e.manual) {\n      const isBack = this.state.isBack;\n      const prevView = this.state.prevView;\n      const nextView = this.state.nextView;\n      this.setState({\n        activeView: nextView,\n        prevView: null,\n        nextView: null,\n        visibleViews: [nextView],\n        transition: false,\n        isBack: undefined\n      }, () => {\n        isBack ? this.window.scrollTo(0, this.state.scrolls[this.state.activeView]) : this.window.scrollTo(0, 0);\n        this.props.onTransition && this.props.onTransition({ isBack, from: prevView, to: nextView });\n      });\n    }\n  };\n\n  blurActiveElement () {\n    if (typeof this.window !== 'undefined' && this.document.activeElement) {\n      this.document.activeElement.blur();\n    }\n  }\n\n  render () {\n    const { popout, modal } = this.props;\n    const { transition, isBack, prevView, activeView, nextView } = this.state;\n\n    let Views = this.arrayChildren.filter(View => this.state.visibleViews.indexOf(View.props.id) >= 0);\n\n    return (\n      <div className={classNames(baseClassName, this.props.className, { 'Root--transition': transition })}>\n        {Views.map(View => (\n          <div key={View.props.id} id={`view-${View.props.id}`} className={classNames('Root__view', {\n            'Root__view--hide-back': View.props.id === prevView && isBack,\n            'Root__view--hide-forward': View.props.id === prevView && !isBack,\n            'Root__view--show-back': View.props.id === nextView && isBack,\n            'Root__view--show-forward': View.props.id === nextView && !isBack,\n            'Root__view--active': View.props.id === activeView\n          })}>\n            {View}\n          </div>\n        ))}\n        {!!popout && <div className=\"Root__popout\">{popout}</div>}\n        {!!modal && <div className=\"Root__modal\">{modal}</div>}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}