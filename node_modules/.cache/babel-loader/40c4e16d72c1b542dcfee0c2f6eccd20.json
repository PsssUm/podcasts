{"ast":null,"code":"import _classCallCheck from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import pickture from\"../../resources/icons/pickture.svg\";import{FormLayout,File}from'@vkontakte/vkui';var img=new Image();var fr=new FileReader();var PhotoPicker=/*#__PURE__*/function(_React$Component){_inherits(PhotoPicker,_React$Component);function PhotoPicker(props){var _this;_classCallCheck(this,PhotoPicker);_this=_possibleConstructorReturn(this,_getPrototypeOf(PhotoPicker).call(this,props));_this.showImage=function(file){fr.onload=_this.onLoadedFileReader;fr.readAsDataURL(file);};_this.onLoadedFileReader=function(){img.onload=_this.onImgLoaded;img.src=fr.result;};_this.onImgLoaded=function(){_this.setState({pickedImageSrc:img.src});_this.props.photoPicked(img.src);};_this.state={pickedImageSrc:_this.props.image};_this.fileUpload=React.createRef();_this.pickImage=_this.pickImage.bind(_assertThisInitialized(_this));_this.fileChangedHandler=_this.fileChangedHandler.bind(_assertThisInitialized(_this));_this.onDismiss=_this.onDismiss.bind(_assertThisInitialized(_this));return _this;}_createClass(PhotoPicker,[{key:\"pickImage\",value:function pickImage(){this.fileUpload.current.click();}},{key:\"fileChangedHandler\",value:function fileChangedHandler(event){if(event&&event.target.files&&event.target.files.length>0){this.showImage(event.target.files[0]);}}},{key:\"onDismiss\",value:function onDismiss(){this.setState({pickedImageSrc:undefined});this.props.photoPicked(undefined);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{onClick:this.pickImage,className:\"details_image_container hover\"},this.state.pickedImageSrc==undefined?React.createElement(\"img\",{className:\"center\",src:pickture}):React.createElement(\"img\",{className:\"picked_image\",src:this.state.pickedImageSrc}),React.createElement(\"input\",{id:\"fileInput\",className:\"custom-file-input hover\",type:\"file\",accept:\"image/*\",onChange:this.fileChangedHandler,style:{display:\"none\"},ref:this.fileUpload}));}}]);return PhotoPicker;}(React.Component);export default PhotoPicker;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/PhotoPicker.js"],"names":["React","FormLayout","File","img","Image","fr","FileReader","PhotoPicker","props","showImage","file","onload","onLoadedFileReader","readAsDataURL","onImgLoaded","src","result","setState","pickedImageSrc","photoPicked","state","image","fileUpload","createRef","pickImage","bind","fileChangedHandler","onDismiss","current","click","event","target","files","length","undefined","pickture","display","Component"],"mappings":"g2BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,yDAEA,OAASC,UAAT,CAAqBC,IAArB,KAAgC,iBAAhC,CACA,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,KAAJ,EAAV,CACA,GAAIC,CAAAA,EAAE,CAAG,GAAIC,CAAAA,UAAJ,EAAT,C,GACMC,CAAAA,W,iFAEF,qBAAYC,KAAZ,CAAkB,6CACd,6EAAMA,KAAN,GADc,MAkBlBC,SAlBkB,CAkBN,SAACC,IAAD,CAAU,CAClBL,EAAE,CAACM,MAAH,CAAY,MAAKC,kBAAjB,CACAP,EAAE,CAACQ,aAAH,CAAiBH,IAAjB,EACH,CArBiB,OAsBlBE,kBAtBkB,CAsBG,UAAM,CACvBT,GAAG,CAACQ,MAAJ,CAAa,MAAKG,WAAlB,CACAX,GAAG,CAACY,GAAJ,CAAUV,EAAE,CAACW,MAAb,CACH,CAzBiB,OA0BlBF,WA1BkB,CA0BJ,UAAM,CAChB,MAAKG,QAAL,CAAc,CAACC,cAAc,CAAGf,GAAG,CAACY,GAAtB,CAAd,EACA,MAAKP,KAAL,CAAWW,WAAX,CAAuBhB,GAAG,CAACY,GAA3B,EACH,CA7BiB,CAEd,MAAKK,KAAL,CAAa,CACTF,cAAc,CAAG,MAAKV,KAAL,CAAWa,KADnB,CAAb,CAGA,MAAKC,UAAL,CAAkBtB,KAAK,CAACuB,SAAN,EAAlB,CACA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeC,IAAf,+BAAjB,CACA,MAAKC,kBAAL,CAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,+BAA1B,CACA,MAAKE,SAAL,CAAiB,MAAKA,SAAL,CAAeF,IAAf,+BAAjB,CARc,aASjB,C,qEACW,CACR,KAAKH,UAAL,CAAgBM,OAAhB,CAAwBC,KAAxB,GACH,C,8DACkBC,K,CAAO,CACtB,GAAGA,KAAK,EAAIA,KAAK,CAACC,MAAN,CAAaC,KAAtB,EAA+BF,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAAnB,CAA4B,CAA9D,CAAgE,CAC5D,KAAKxB,SAAL,CAAeqB,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAf,EACH,CACJ,C,6CAaU,CACP,KAAKf,QAAL,CAAc,CAACC,cAAc,CAAGgB,SAAlB,CAAd,EACA,KAAK1B,KAAL,CAAWW,WAAX,CAAuBe,SAAvB,EACH,C,uCACQ,CACL,MACI,4BAAK,OAAO,CAAE,KAAKV,SAAnB,CAA8B,SAAS,CAAC,+BAAxC,EACK,KAAKJ,KAAL,CAAWF,cAAX,EAA6BgB,SAA7B,CAAyC,2BAAK,SAAS,CAAC,QAAf,CAAwB,GAAG,CAAEC,QAA7B,EAAzC,CACD,2BAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAE,KAAKf,KAAL,CAAWF,cAA9C,EAFJ,CAGI,6BAAO,EAAE,CAAC,WAAV,CAAsB,SAAS,CAAC,yBAAhC,CAA0D,IAAI,CAAC,MAA/D,CAAsE,MAAM,CAAC,SAA7E,CAAuF,QAAQ,CAAE,KAAKQ,kBAAtG,CAA0H,KAAK,CAAE,CAAEU,OAAO,CAAE,MAAX,CAAjI,CAAsJ,GAAG,CAAE,KAAKd,UAAhK,EAHJ,CADJ,CAQH,C,yBA7CqBtB,KAAK,CAACqC,S,EA+ChC,cAAe9B,CAAAA,WAAf","sourcesContent":["import React from 'react';\nimport pickture from '../../resources/icons/pickture.svg'\nimport { FormLayout, File} from '@vkontakte/vkui';\nvar img = new Image; \nvar fr = new FileReader;\nclass PhotoPicker extends React.Component {\n   \n    constructor(props){\n        super(props)\n        this.state = {\n            pickedImageSrc : this.props.image\n        }\n        this.fileUpload = React.createRef();\n        this.pickImage = this.pickImage.bind(this);\n        this.fileChangedHandler = this.fileChangedHandler.bind(this);\n        this.onDismiss = this.onDismiss.bind(this);\n    }\n    pickImage() {\n        this.fileUpload.current.click();\n    }\n    fileChangedHandler(event) {\n        if(event && event.target.files && event.target.files.length > 0){\n            this.showImage(event.target.files[0])\n        }\n    }\n    showImage = (file) => {\n        fr.onload = this.onLoadedFileReader\n        fr.readAsDataURL(file);\n    }\n    onLoadedFileReader = () => {\n        img.onload = this.onImgLoaded\n        img.src = fr.result;\n    }\n    onImgLoaded = () => {\n        this.setState({pickedImageSrc : img.src})\n        this.props.photoPicked(img.src)\n    }\n    onDismiss(){\n        this.setState({pickedImageSrc : undefined})\n        this.props.photoPicked(undefined)\n    }\n    render() {\n        return (\n            <div onClick={this.pickImage} className=\"details_image_container hover\">\n                {this.state.pickedImageSrc == undefined ? <img className=\"center\" src={pickture}/> : \n                <img className=\"picked_image\" src={this.state.pickedImageSrc} />}\n                <input id=\"fileInput\" className=\"custom-file-input hover\" type=\"file\" accept=\"image/*\" onChange={this.fileChangedHandler} style={{ display: \"none\" }} ref={this.fileUpload}/>\n\n            </div>\n        );\n    }\n}\nexport default PhotoPicker;"]},"metadata":{},"sourceType":"module"}