{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport React, { Component } from 'react';\nimport Tappable from '../Tappable/Tappable';\nimport PopoutWrapper from '../PopoutWrapper/PopoutWrapper';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport transitionEvents from '../../lib/transitionEvents';\nimport { ANDROID } from '../../lib/platform';\nimport withPlatform from '../../hoc/withPlatform';\n\nvar Alert =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Alert, _Component);\n\n  function Alert(props) {\n    var _this;\n\n    _classCallCheck(this, Alert);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Alert).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"element\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onItemClick\", function (item) {\n      return function () {\n        var action = item.action,\n            autoclose = item.autoclose;\n\n        if (autoclose) {\n          _this.setState({\n            closing: true\n          });\n\n          _this.waitTransitionFinish(function () {\n            autoclose && _this.props.onClose();\n            action && action();\n          });\n        } else {\n          action && action();\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClose\", function () {\n      _this.setState({\n        closing: true\n      });\n\n      _this.waitTransitionFinish(function () {\n        _this.props.onClose();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopPropagation\", function (e) {\n      return e.stopPropagation();\n    });\n\n    _this.element = React.createRef();\n    _this.state = {\n      closing: false\n    };\n    return _this;\n  }\n\n  _createClass(Alert, [{\n    key: \"waitTransitionFinish\",\n    value: function waitTransitionFinish(eventHandler) {\n      if (transitionEvents.supported) {\n        var eventName = transitionEvents.prefix ? transitionEvents.prefix + 'TransitionEnd' : 'transitionend';\n        this.element.current.removeEventListener(eventName, eventHandler);\n        this.element.current.addEventListener(eventName, eventHandler);\n      } else {\n        setTimeout(eventHandler.bind(this), this.props.platform === ANDROID ? 200 : 300);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          actions = _this$props.actions,\n          actionsLayout = _this$props.actionsLayout,\n          children = _this$props.children,\n          className = _this$props.className,\n          style = _this$props.style,\n          platform = _this$props.platform,\n          restProps = _objectWithoutProperties(_this$props, [\"actions\", \"actionsLayout\", \"children\", \"className\", \"style\", \"platform\"]);\n\n      var closing = this.state.closing;\n      return React.createElement(PopoutWrapper, {\n        className: className,\n        closing: closing,\n        style: style,\n        onClick: this.onClose\n      }, React.createElement(\"div\", _extends({}, restProps, {\n        ref: this.element,\n        onClick: this.stopPropagation,\n        className: classNames(getClassName('Alert', platform), {\n          'Alert--v': actionsLayout === 'vertical',\n          'Alert--h': actionsLayout === 'horizontal',\n          'Alert--closing': closing\n        })\n      }), React.createElement(\"div\", {\n        className: \"Alert__content\"\n      }, children), React.createElement(\"footer\", {\n        className: \"Alert__footer\"\n      }, actions.map(function (button, i) {\n        return React.createElement(Tappable, {\n          component: \"button\",\n          className: classNames('Alert__btn', \"Alert__btn--\".concat(button.style)),\n          onClick: _this2.onItemClick(button),\n          key: \"alert-action-\".concat(i)\n        }, React.createElement(\"span\", {\n          dangerouslySetInnerHTML: {\n            __html: button.title\n          }\n        }));\n      }))));\n    }\n  }]);\n\n  return Alert;\n}(Component);\n\n_defineProperty(Alert, \"defaultProps\", {\n  actionsLayout: 'horizontal',\n  actions: []\n});\n\nexport default withPlatform(Alert);","map":{"version":3,"sources":["../../../../src/components/Alert/Alert.tsx"],"names":["Alert","Component","React","closing","actionsLayout","actions","action","autoclose","item","e","eventHandler","transitionEvents","eventName","setTimeout","children","className","style","platform","restProps","onClose","classNames","getClassName","button","__html","title","withPlatform"],"mappings":"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","sourcesContent":["import React, { Component, HTMLAttributes } from 'react';\nimport Tappable from '../Tappable/Tappable';\nimport PopoutWrapper from '../PopoutWrapper/PopoutWrapper';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport transitionEvents from '../../lib/transitionEvents';\nimport { ANDROID } from '../../lib/platform';\nimport { HasChildren, HasPlatform } from '../../types/props';\nimport withPlatform from '../../hoc/withPlatform';\n\nexport interface AlertActionsInterface {\n  title: string;\n  action?(): void;\n  autoclose?: boolean;\n  style: 'cancel' | 'destructive' | 'default'\n}\n\nexport interface AlertProps extends HTMLAttributes<HTMLElement>, HasPlatform, HasChildren {\n  actionsLayout?: 'vertical' | 'horizontal';\n  actions?: AlertActionsInterface[];\n  onClose?(): void\n}\n\nexport interface AlertState {\n  closing: boolean\n}\n\nclass Alert extends Component<AlertProps, AlertState> {\n  constructor(props) {\n    super(props);\n    this.element = React.createRef();\n    this.state = {\n      closing: false\n    };\n  }\n\n  element: React.RefObject<HTMLDivElement>\n\n  static defaultProps = {\n    actionsLayout: 'horizontal',\n    actions: []\n  };\n\n  onItemClick = item => () => {\n    const { action, autoclose } = item;\n\n    if (autoclose) {\n      this.setState({ closing: true });\n      this.waitTransitionFinish(() => {\n        autoclose && this.props.onClose();\n        action && action();\n      });\n    } else {\n      action && action();\n    }\n  };\n\n  onClose = () => {\n    this.setState({ closing: true });\n    this.waitTransitionFinish(() => {\n      this.props.onClose();\n    });\n  };\n\n  stopPropagation = e => e.stopPropagation();\n\n  waitTransitionFinish (eventHandler) {\n    if (transitionEvents.supported) {\n      const eventName = transitionEvents.prefix ? transitionEvents.prefix + 'TransitionEnd' : 'transitionend';\n\n      this.element.current.removeEventListener(eventName, eventHandler);\n      this.element.current.addEventListener(eventName, eventHandler);\n    } else {\n      setTimeout(eventHandler.bind(this), this.props.platform === ANDROID ? 200 : 300);\n    }\n  }\n\n  render () {\n    const { actions, actionsLayout, children, className, style, platform, ...restProps } = this.props;\n    const { closing } = this.state;\n\n    return (\n      <PopoutWrapper\n        className={className}\n        closing={closing}\n        style={style}\n        onClick={this.onClose}\n      >\n        <div\n          {...restProps}\n          ref={this.element}\n          onClick={this.stopPropagation}\n          className={classNames(getClassName('Alert', platform), {\n            'Alert--v': actionsLayout === 'vertical',\n            'Alert--h': actionsLayout === 'horizontal',\n            'Alert--closing': closing\n          })}\n        >\n          <div className=\"Alert__content\">{children}</div>\n          <footer className=\"Alert__footer\">\n            {actions.map((button, i) => (\n              <Tappable\n                component=\"button\"\n                className={classNames('Alert__btn', `Alert__btn--${button.style}`)}\n                onClick={this.onItemClick(button)}\n                key={`alert-action-${i}`}\n              >\n                <span dangerouslySetInnerHTML={{ __html: button.title }} />\n              </Tappable>\n            ))}\n          </footer>\n        </div>\n      </PopoutWrapper>\n    );\n  }\n}\n\nexport default withPlatform(Alert);\n"]},"metadata":{},"sourceType":"module"}