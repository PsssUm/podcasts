{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport React, { Component } from 'react';\nimport classNames from '../../lib/classNames';\nimport Icon24Dropdown from '@vkontakte/icons/dist/24/dropdown';\nimport FormField from '../FormField/FormField';\n\nvar Select =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Select, _Component);\n\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"isControlledOutside\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"selectEl\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      _this.setTitle();\n\n      if (!_this.isControlledOutside) {\n        _this.setState({\n          value: e.currentTarget.value\n        });\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setTitle\", function () {\n      var selectedOption = _this.selectEl.options[_this.selectEl.selectedIndex];\n      selectedOption && _this.setState({\n        title: selectedOption.text,\n        notSelected: selectedOption.value === '' && _this.props.hasOwnProperty('placeholder')\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRef\", function (element) {\n      _this.selectEl = element;\n      var getRef = _this.props.getRef;\n\n      if (getRef) {\n        if (typeof getRef === 'function') {\n          getRef(element);\n        } else {\n          getRef.current = element;\n        }\n      }\n    });\n\n    var state = {\n      title: '',\n      notSelected: false\n    };\n\n    if (typeof props.value !== 'undefined') {\n      _this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n\n    _this.state = state;\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.value !== this.props.value || prevProps.children !== this.props.children) {\n        this.setTitle();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setTitle();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n\n      var _this$props = this.props,\n          style = _this$props.style,\n          value = _this$props.value,\n          defaultValue = _this$props.defaultValue,\n          onChange = _this$props.onChange,\n          alignment = _this$props.alignment,\n          status = _this$props.status,\n          placeholder = _this$props.placeholder,\n          children = _this$props.children,\n          className = _this$props.className,\n          getRef = _this$props.getRef,\n          getRootRef = _this$props.getRootRef,\n          restProps = _objectWithoutProperties(_this$props, [\"style\", \"value\", \"defaultValue\", \"onChange\", \"alignment\", \"status\", \"placeholder\", \"children\", \"className\", \"getRef\", \"getRootRef\"]);\n\n      return React.createElement(FormField, {\n        TagName: \"label\",\n        className: classNames('Select', (_classNames = {}, _defineProperty(_classNames, \"Select--not-selected\", this.state.notSelected), _defineProperty(_classNames, \"Select--align-\".concat(alignment), !!alignment), _classNames), className),\n        style: style,\n        getRootRef: getRootRef,\n        status: status\n      }, React.createElement(\"select\", _extends({}, restProps, {\n        className: \"Select__el\",\n        onChange: this.onChange,\n        value: this.value,\n        ref: this.getRef\n      }), placeholder && React.createElement(\"option\", {\n        value: \"\"\n      }, placeholder), children), React.createElement(\"div\", {\n        className: \"Select__container\"\n      }, React.createElement(\"div\", {\n        className: \"Select__title\"\n      }, this.state.title), React.createElement(Icon24Dropdown, null)));\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.isControlledOutside ? this.props.value : this.state.value;\n    }\n  }]);\n\n  return Select;\n}(Component);\n\nexport { Select as default };","map":{"version":3,"sources":["../../../../src/components/Select/Select.tsx"],"names":["Select","Component","state","title","notSelected","props","value","e","selectedOption","prevProps","getRef","style","defaultValue","onChange","alignment","status","placeholder","children","className","getRootRef","restProps","classNames"],"mappings":"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","sourcesContent":["import React, { Component, HTMLAttributes } from 'react';\nimport classNames from '../../lib/classNames';\nimport Icon24Dropdown from '@vkontakte/icons/dist/24/dropdown';\nimport FormField from '../FormField/FormField';\nimport { HasChildren, HasFormStatus, HasRef, HasRootRef } from '../../types/props';\n\nexport interface SelectProps extends\n  HTMLAttributes<HTMLSelectElement>,\n  HasRef<HTMLSelectElement>,\n  HasRootRef<HTMLLabelElement>,\n  HasChildren,\n  HasFormStatus\n{\n  value?: string;\n  placeholder?: string;\n  alignment?: 'left' | 'center' | 'top';\n  disabled?: boolean;\n}\n\nexport interface SelectState {\n  value?: string,\n  title?: string,\n  notSelected?: boolean,\n}\n\nexport default class Select extends Component<SelectProps, SelectState> {\n  constructor (props) {\n    super(props);\n    const state: SelectState = {\n      title: '',\n      notSelected: false\n    };\n    if (typeof props.value !== 'undefined') {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n    this.state = state;\n  }\n\n  isControlledOutside?: boolean\n  selectEl?: HTMLSelectElement\n\n  onChange = (e: React.FormEvent<HTMLSelectElement>) => {\n    this.setTitle();\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.currentTarget.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  };\n\n  setTitle = () => {\n    const selectedOption = this.selectEl.options[this.selectEl.selectedIndex];\n    selectedOption && this.setState({\n      title: selectedOption.text,\n      notSelected: selectedOption.value === '' && this.props.hasOwnProperty('placeholder')\n    });\n  };\n\n  componentDidUpdate (prevProps) {\n    if (prevProps.value !== this.props.value || prevProps.children !== this.props.children) {\n      this.setTitle();\n    }\n  }\n\n  componentDidMount () {\n    this.setTitle();\n  }\n\n  get value () {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  getRef = (element) => {\n    this.selectEl = element;\n\n    const getRef = this.props.getRef;\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const { style, value, defaultValue, onChange, alignment, status, placeholder, children, className,\n      getRef, getRootRef, ...restProps } = this.props;\n\n    return (\n      <FormField\n        TagName=\"label\"\n        className={classNames('Select', {\n          [`Select--not-selected`]: this.state.notSelected,\n          [`Select--align-${alignment}`]: !!alignment\n        }, className)}\n        style={style}\n        getRootRef={getRootRef}\n        status={status}\n      >\n        <select\n          {...restProps}\n          className=\"Select__el\"\n          onChange={this.onChange}\n          value={this.value}\n          ref={this.getRef}\n        >\n          {placeholder && <option value=\"\">{placeholder}</option>}\n          {children}\n        </select>\n        <div className=\"Select__container\">\n          <div className=\"Select__title\">{this.state.title}</div>\n          <Icon24Dropdown />\n        </div>\n      </FormField>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}