{"ast":null,"code":"var _jsxFileName = \"/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/Details.js\";\nimport React from 'react';\nimport { Button, Div, Panel } from '@vkontakte/vkui';\nimport '../resources/styles/details_styes.css';\nimport ic_comment_outline from \"../resources/icons/ic_comment_outline.svg\";\nimport ic_eye from \"../resources/icons/ic_eye.svg\";\nimport ic_like from \"../resources/icons/ic_like.svg\";\nimport ic_reposts from \"../resources/icons/ic_reposts.svg\";\nimport avatar1 from '../resources/icons/avatar1.png';\nimport avatar2 from '../resources/icons/avatar2.png';\nimport ic_smile_outline from \"../resources/icons/ic_smile_outline.svg\";\nimport { getDatesCount, dateToString } from '../utils/Utils';\n\nclass Details extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.animateProgress = () => {\n      this.step = this.props.donation.summ / (Math.random() * (100 - 60) + 60);\n      this.iteration = 0;\n      this.greenIteration = 0;\n      this.interval = setInterval(this.animationLoop, 50);\n      this.intervalTop = setInterval(this.animationLoopTop, 50);\n    };\n\n    this.animationLoop = () => {\n      if (this.isAnimate) {\n        this.progress = parseFloat(this.step * this.iteration) / this.props.donation.summ;\n        var progressCount = parseInt(this.progress * this.props.donation.summ);\n        const newProgress = this.progress * this.progressBg.current.offsetWidth;\n\n        if (newProgress > this.progressBg.current.offsetWidth) {\n          this.iteration = 0;\n        } else {\n          this.iteration += 1;\n        }\n\n        this.setState({\n          progressWidth: newProgress,\n          progressCount: progressCount\n        });\n      }\n    };\n\n    this.animationLoopTop = () => {\n      if (this.isAnimate) {\n        this.progressTop = parseFloat(this.step * this.greenIteration) / this.props.donation.summ;\n        var progressCount = parseInt(this.progressTop * this.props.donation.summ);\n        const newProgress = this.progressTop * this.progressBgGreen.current.offsetWidth;\n\n        if (newProgress > this.progressBgGreen.current.offsetWidth) {\n          this.greenIteration = 0;\n        } else {\n          this.greenIteration += 1;\n        }\n\n        this.setState({\n          progressWidthTop: newProgress,\n          progressPercentsTop: this.progressTop,\n          progressCountTop: progressCount\n        });\n\n        if (newProgress >= this.progressBgGreen.current.offsetWidth) {\n          clearInterval(this.intervalTop);\n          setTimeout(this.runAnimationLoopTop, 2000);\n        }\n      }\n    };\n\n    this.runAnimationLoopTop = () => {\n      this.intervalTop = setInterval(this.animationLoopTop, 50);\n    };\n\n    this.state = {\n      progressWidth: 0,\n      progressWidthTop: 0,\n      progressPercentsTop: 0,\n      progressCount: 0,\n      progressCountTop: 0\n    };\n    this.progressBg = React.createRef();\n    this.progressBgGreen = React.createRef();\n    this.isAnimate = true;\n  }\n\n  componentDidMount() {\n    this.animateProgress();\n  }\n\n  componentWillUnmount() {\n    this.isAnimate = false;\n    clearInterval(this.interval);\n    clearInterval(this.intervalTop);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"main_content_details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.props.donation.image,\n      height: \"140\",\n      className: \"detail_img-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"main_content_details_texts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"detail_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.props.donation.title), React.createElement(\"p\", {\n      className: \"detail_author\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\u0410\\u0432\\u0442\\u043E\\u0440 \", this.props.donation.name), React.createElement(\"p\", {\n      className: \"detail_date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, this.props.donation.isTarget ? this.props.donation.date > 0 ? \"Закончится через \" + getDatesCount(this.props.donation.date) + \" дн.\" : \"Cбор закончится, когда соберём сумму\" : \"Помощь нужна каждый месяц\"), React.createElement(\"hr\", {\n      className: \"detail_hr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"detail_date2\",\n      style: {\n        margin: '0px 0px 6px 0px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, this.props.donation.isTarget ? this.props.donation.date > 0 ? \"Нужно собрать до \" + dateToString(this.props.donation.date) : \"Нужно собрать\" : \"Нужно собрать в сентябре\"), React.createElement(\"span\", {\n      style: this.state.progressPercentsTop >= 0.7 ? {\n        display: 'block'\n      } : {\n        display: 'none'\n      },\n      className: \"detail_box_prog_text_white2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, this.props.donation.summ, \" \\u20BD\")), React.createElement(\"div\", {\n      ref: this.progressBgGreen,\n      className: \"detail_box\",\n      style: {\n        display: 'flex'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: this.state.progressWidthTop + \"px\"\n      },\n      className: \"detail_box_green\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: this.state.progressPercentsTop < 0.25 || this.state.progressPercentsTop >= 1.0 ? {\n        display: 'none'\n      } : {\n        display: 'block'\n      },\n      className: \"detail_box_prog_text_white1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, this.state.progressCountTop, \" \\u20BD\"), React.createElement(\"span\", {\n      style: this.state.progressPercentsTop >= 1.0 ? {\n        display: 'block'\n      } : {\n        display: 'none'\n      },\n      className: \"detail_box_prog_text_white_center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.props.donation.summ, \" \\u20BD \\u0441\\u043E\\u0431\\u0440\\u0430\\u043D\\u044B!\")), React.createElement(\"span\", {\n      style: this.state.progressPercentsTop >= 0.25 ? {\n        display: 'none'\n      } : {\n        display: 'block'\n      },\n      className: \"detail_box_prog_text_white3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.state.progressCountTop, \" \\u20BD\"), React.createElement(\"span\", {\n      style: this.state.progressPercentsTop >= 0.7 ? {\n        display: 'none'\n      } : {\n        display: 'block'\n      },\n      className: \"detail_box_prog_text_white2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, this.props.donation.summ, \" \\u20BD\")), React.createElement(\"hr\", {\n      className: \"detail_hr\",\n      style: {\n        margin: '12px 0px 6px 0px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"detail_description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.props.donation.description), React.createElement(\"hr\", {\n      className: \"detail_hr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail_counters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: ic_like,\n      width: \"24\",\n      className: \"detail_counters_icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail_counters_text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"65 \"), React.createElement(\"img\", {\n      src: ic_comment_outline,\n      width: \"24\",\n      className: \"detail_counters_icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail_counters_text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"35 \\u20BD\"), React.createElement(\"img\", {\n      src: ic_reposts,\n      width: \"21\",\n      className: \"detail_counters_icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail_counters_text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"3 \"), React.createElement(\"div\", {\n      className: \"detail_counters_right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: ic_eye,\n      width: \"14\",\n      className: \"detail_counters_icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail_counters_text_right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"7K \")))), React.createElement(\"hr\", {\n      className: \"detail_hr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail_coment_div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      className: \"detail_coment_div2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: avatar1,\n      width: \"36\",\n      height: \"36\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: 'block',\n        margin: '0px 0px 0px 8px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"detail_coments_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"\\u0410\\u043B\\u0435\\u043A\\u0441\\u0435\\u0439 \\u041C\\u0430\\u0437\\u0435\\u043B\\u044E\\u043A\"), React.createElement(\"span\", {\n      className: \"detail_coments_time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"5 \\u043C\\u0438\\u043D\"), \" \", React.createElement(\"p\", {\n      className: \"detail_coments_text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\"), \" \"), React.createElement(\"img\", {\n      src: ic_like,\n      width: \"16\",\n      className: \"detail_comment_like\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      className: \"detail_coment_div2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: avatar2,\n      width: \"36\",\n      height: \"36\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      className: \"detail_coment_div3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"detail_coments_edit_text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"), React.createElement(\"img\", {\n      src: ic_smile_outline,\n      style: {\n        marginRight: \"4px\",\n        height: '24px',\n        marginTop: '5px'\n      },\n      width: \"24\",\n      className: \"detail_comment_like\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"bottom_progress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bottom_progress_line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"snippet_progress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"snippen_progress_cont\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"snippet_progress_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, this.state.progressCount == 0 ? \"Помогите первым\" : \"Собрано \" + this.state.progressCount + \" ₽ из \" + this.props.donation.summ + \" ₽\"), React.createElement(\"div\", {\n      className: \"relative\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      ref: this.progressBg,\n      className: \"snippet_progress_bg green_bg_progress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        width: this.state.progressWidth + \"px\"\n      },\n      className: \"progress_view green_bg_progress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"snippet_help_btn news_item_help green_help_btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u043C\\u043E\\u0447\\u044C\"))));\n  }\n\n}\n\nexport default Details;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/Details.js"],"names":["React","Button","Div","Panel","avatar1","avatar2","getDatesCount","dateToString","Details","Component","constructor","props","animateProgress","step","donation","summ","Math","random","iteration","greenIteration","interval","setInterval","animationLoop","intervalTop","animationLoopTop","isAnimate","progress","parseFloat","progressCount","parseInt","newProgress","progressBg","current","offsetWidth","setState","progressWidth","progressTop","progressBgGreen","progressWidthTop","progressPercentsTop","progressCountTop","clearInterval","setTimeout","runAnimationLoopTop","state","createRef","componentDidMount","componentWillUnmount","render","image","title","name","isTarget","date","display","margin","width","description","ic_like","ic_comment_outline","ic_reposts","ic_eye","ic_smile_outline","marginRight","height","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, Div, Panel } from '@vkontakte/vkui';\nimport '../resources/styles/details_styes.css'\n\nimport ic_comment_outline from '../resources/icons/ic_comment_outline.svg'\nimport ic_eye from '../resources/icons/ic_eye.svg'\nimport ic_like from '../resources/icons/ic_like.svg'\nimport ic_reposts from '../resources/icons/ic_reposts.svg'\nimport avatar1 from '../resources/icons/avatar1.png'\nimport avatar2 from '../resources/icons/avatar2.png'\nimport ic_smile_outline from '../resources/icons/ic_smile_outline.svg'\nimport { getDatesCount, dateToString } from '../utils/Utils';\n\n\nclass Details extends React.Component {\n   \n    constructor(props){\n        super(props)\n        this.state = {\n            progressWidth : 0,\n            progressWidthTop : 0,\n            progressPercentsTop : 0,\n            progressCount : 0,\n            progressCountTop : 0,\n            \n        }\n        this.progressBg = React.createRef()\n        this.progressBgGreen = React.createRef()\n        this.isAnimate = true\n    }\n    componentDidMount(){\n        this.animateProgress()\n    }\n    animateProgress = () => {\n        this.step = this.props.donation.summ / (Math.random() * (100 - 60) + 60)\n        this.iteration = 0\n        this.greenIteration = 0\n        this.interval = setInterval(this.animationLoop, 50);\n        this.intervalTop = setInterval(this.animationLoopTop, 50);\n    }\n    animationLoop = () => {\n        if (this.isAnimate){\n            this.progress = parseFloat(this.step*this.iteration) / this.props.donation.summ\n            var progressCount = parseInt(this.progress * this.props.donation.summ)\n            const newProgress = (this.progress * this.progressBg.current.offsetWidth)\n            if (newProgress > this.progressBg.current.offsetWidth){\n                this.iteration = 0\n            } else {\n                this.iteration += 1 \n            }\n            this.setState({progressWidth : newProgress, progressCount : progressCount})\n        }\n    }\n    animationLoopTop = () => {\n        if (this.isAnimate){\n            this.progressTop = parseFloat(this.step*this.greenIteration) / this.props.donation.summ\n            var progressCount = parseInt(this.progressTop * this.props.donation.summ)\n            const newProgress = (this.progressTop * this.progressBgGreen.current.offsetWidth)\n            if (newProgress > this.progressBgGreen.current.offsetWidth){\n                this.greenIteration = 0\n            } else {\n                this.greenIteration += 1 \n            }\n            this.setState({progressWidthTop : newProgress, progressPercentsTop : this.progressTop, progressCountTop : progressCount})\n            if (newProgress >= this.progressBgGreen.current.offsetWidth){\n                clearInterval(this.intervalTop);\n                setTimeout(this.runAnimationLoopTop, 2000);\n            }\n        }\n    }\n    runAnimationLoopTop = () => {\n        this.intervalTop = setInterval(this.animationLoopTop, 50);\n    }\n\n    componentWillUnmount(){\n        this.isAnimate = false\n        clearInterval(this.interval);\n        clearInterval(this.intervalTop);\n    }\n    render() {\n        return (\n            <div className=\"main_content_details\" >\n              <img src={this.props.donation.image} height=\"140\" className=\"detail_img-responsive\"/>\n              <div className=\"main_content_details_texts\" >\n                <p className=\"detail_title\">{this.props.donation.title}</p>\n                <p className=\"detail_author\">Автор {this.props.donation.name}</p>\n                <p className=\"detail_date\">{this.props.donation.isTarget ? this.props.donation.date > 0 ? (\"Закончится через \" + getDatesCount(this.props.donation.date) + \" дн.\") : \"Cбор закончится, когда соберём сумму\" : \"Помощь нужна каждый месяц\"}</p>\n                <hr className=\"detail_hr\"/>\n\n                <div style={{display: 'flex'}}>\n                   <p className=\"detail_date2\" style={{margin: '0px 0px 6px 0px'}}>{this.props.donation.isTarget ? this.props.donation.date > 0 ? (\"Нужно собрать до \" + dateToString(this.props.donation.date)) : \"Нужно собрать\" : \"Нужно собрать в сентябре\"}</p>\n                   <span style={this.state.progressPercentsTop >= 0.7 ? {display : 'block'} : {display : 'none'}} className=\"detail_box_prog_text_white2\">{this.props.donation.summ} ₽</span>\n                </div>\n                <div ref={this.progressBgGreen} className=\"detail_box\" style={{display: 'flex'}}>\n                    <div style={{width : (this.state.progressWidthTop + \"px\")}} className=\"detail_box_green\">\n                          <span style={(this.state.progressPercentsTop < 0.25 || this.state.progressPercentsTop >= 1.0) ? {display : 'none'} : {display : 'block'}} className=\"detail_box_prog_text_white1\">{this.state.progressCountTop} ₽</span>\n                          <span style={this.state.progressPercentsTop >= 1.0 ? {display : 'block'} : {display : 'none'}} className=\"detail_box_prog_text_white_center\">{this.props.donation.summ} ₽ собраны!</span>\n                    </div>\n                    <span style={this.state.progressPercentsTop >= 0.25 ? {display : 'none'} : {display : 'block'}} className=\"detail_box_prog_text_white3\">{this.state.progressCountTop} ₽</span>\n                    <span style={this.state.progressPercentsTop >= 0.7 ? {display : 'none'} : {display : 'block'}} className=\"detail_box_prog_text_white2\">{this.props.donation.summ} ₽</span>\n                </div>\n                \n                <hr className=\"detail_hr\" style={{margin: '12px 0px 6px 0px'}} />\n                <p className=\"detail_description\">{this.props.donation.description}</p>\n                <hr className=\"detail_hr\"/>\n                <div className=\"detail_counters\">\n                    <img src={ic_like} width=\"24\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text\">65 </div>\n                    <img src={ic_comment_outline} width=\"24\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text\">35 ₽</div>\n                    <img src={ic_reposts} width=\"21\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text\">3 </div>\n                    <div className=\"detail_counters_right\">\n                        <img src={ic_eye} width=\"14\" className=\"detail_counters_icon\"/><div className=\"detail_counters_text_right\">7K </div>\n                    </div>\n                </div>\n              </div>\n              <hr className=\"detail_hr\"/>\n              <div className=\"detail_coment_div\">\n                <div style={{display: 'flex'}} className=\"detail_coment_div2\">\n                    <img src={avatar1} width=\"36\" height=\"36\"/><div style={{display: 'block', margin: '0px 0px 0px 8px'}}><span className=\"detail_coments_name\">Алексей Мазелюк</span><span className=\"detail_coments_time\">5 мин</span> <p className=\"detail_coments_text\">Отправил</p> </div>\n                    <img src={ic_like} width=\"16\"className=\"detail_comment_like\" />\n                </div>\n                <div style={{display: 'flex'}} className=\"detail_coment_div2\">\n                    <img src={avatar2} width=\"36\" height=\"36\" />\n                <div style={{display: 'flex'}} className=\"detail_coment_div3\">\n                    <span className=\"detail_coments_edit_text\">Комментарий</span>\n                    <img src={ic_smile_outline} style={{marginRight : \"4px\", height : '24px', marginTop : '5px'}} width=\"24\"className=\"detail_comment_like\" />\n                </div>\n                </div>\n              </div>\n              <div className=\"bottom_progress\">\n                <div className=\"bottom_progress_line\"/>\n                <div className=\"snippet_progress\">\n                    \n                    <div className=\"snippen_progress_cont\">\n                            <p className=\"snippet_progress_title\">{this.state.progressCount == 0 ? \"Помогите первым\" : (\"Собрано \" + this.state.progressCount + \" ₽ из \" + this.props.donation.summ + \" ₽\")}</p>\n                            <div className=\"relative\">\n                                <div ref={this.progressBg} className=\"snippet_progress_bg green_bg_progress\"/>\n                                <div style={{width : (this.state.progressWidth + \"px\")}} className=\"progress_view green_bg_progress\"/>\n                            </div>                            \n                    </div>\n                    <div className=\"snippet_help_btn news_item_help green_help_btn\">Помочь</div>\n                </div>\n              </div>\n              \n            </div>\n\n        );\n    }\n}\nexport default Details;"]},"metadata":{},"sourceType":"module"}