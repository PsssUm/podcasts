{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport React from 'react';\nimport removeObjectKeys from '../../lib/removeObjectKeys';\nimport PropTypes from 'prop-types';\nimport Alert from '../Alert/Alert';\nimport ActionSheet from '../ActionSheet/ActionSheet';\nimport ActionSheetItem from '../ActionSheetItem/ActionSheetItem';\n\nfunction brToNl() {\n  var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var regex = /<br\\s*\\/?>/gi;\n  return str.replace(regex, '\\n');\n}\n\nvar actionId = 1;\n/**\n * @deprecated будет удален в 3.0.0\n */\n\nvar NativePopouts =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NativePopouts, _React$Component);\n\n  function NativePopouts() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NativePopouts);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NativePopouts)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      popout: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"actions\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"actionsStore\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"vkuiListener\", function (e) {\n      if (e.type === 'VKWebAppEvent' && e.detail && e.detail.action) {\n        if (_this.actionsStore.hasOwnProperty(e.detail.action)) {\n          _this.actionsStore[e.detail.action](e.detail);\n\n          _this.props.popout && _this.props.popout.onClose && _this.props.popout.onClose();\n        }\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(NativePopouts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.vkuiConnect.subscribe(this.vkuiListener);\n\n      if (this.props.popout) {\n        this.renderPopout(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.vkuiConnect.unsubscribe(this.vkuiListener);\n    }\n  }, {\n    key: \"renderNativeAlert\",\n    value: function renderNativeAlert(popout) {\n      var style = popout.style,\n          title = popout.title,\n          message = popout.text;\n      this.props.vkuiConnect.send('VKWebAppAlert', {\n        style: style,\n        title: brToNl(title),\n        message: brToNl(message),\n        actions: this.actions.map(function (item) {\n          return removeObjectKeys(item, ['action']);\n        })\n      });\n    }\n  }, {\n    key: \"renderUIAlert\",\n    value: function renderUIAlert(popout) {\n      var title = popout.title,\n          text = popout.text,\n          onClose = popout.onClose,\n          actionsLayout = popout.actionsLayout;\n      this.setState({\n        popout: React.createElement(Alert, {\n          actions: this.actions.map(function (item) {\n            return removeObjectKeys(item, ['params']);\n          }),\n          onClose: onClose,\n          actionsLayout: actionsLayout\n        }, title && React.createElement(\"h2\", null, title), text && React.createElement(\"p\", null, text))\n      });\n    }\n  }, {\n    key: \"renderNativeSheet\",\n    value: function renderNativeSheet(popout) {\n      var style = popout.style;\n      this.props.vkuiConnect.send('VKWebAppAlert', {\n        style: style,\n        actions: this.actions.map(function (item) {\n          return removeObjectKeys(item, ['action']);\n        })\n      });\n    }\n  }, {\n    key: \"renderUISheet\",\n    value: function renderUISheet(popout) {\n      var title = popout.title,\n          text = popout.text,\n          onClose = popout.onClose;\n      this.setState({\n        popout: React.createElement(ActionSheet, {\n          title: title,\n          text: text,\n          onClose: onClose\n        }, this.actions.map(function (item, index) {\n          return React.createElement(ActionSheetItem, {\n            autoclose: item.autoclose,\n            theme: item.style,\n            onClick: item.action,\n            key: \"\".concat(index)\n          }, item.title);\n        }))\n      });\n    }\n  }, {\n    key: \"closeUIPopout\",\n    value: function closeUIPopout() {\n      this.setState({\n        popout: null\n      });\n    }\n  }, {\n    key: \"renderPopout\",\n    value: function renderPopout(props) {\n      if (props.popout.style) {\n        this.actions = props.popout.actions.map(function (item) {\n          return _objectSpread({}, item, {\n            autoclose: item.hasOwnProperty('autoclose') ? item.autoclose : true,\n            action: item.action || props.popout.onClose,\n            handler: _objectSpread({}, item.params, {\n              action: \"action-\".concat(actionId++)\n            })\n          });\n        });\n        this.actionsStore = this.actions.reduce(function (res, item) {\n          res[item.handler.action] = item.action;\n          return res;\n        }, {});\n\n        switch (props.popout.style) {\n          case 'alert':\n            this.context.isWebView ? this.renderNativeAlert(props.popout) : this.renderUIAlert(props.popout);\n            break;\n\n          case 'actionSheet':\n            this.context.isWebView ? this.renderNativeSheet(props.popout) : this.renderUISheet(props.popout);\n            break;\n        }\n      } else {\n        this.setState({\n          popout: props.popout\n        });\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!nextProps.popout && this.props.popout) {\n        this.closeUIPopout();\n      }\n\n      if (nextProps.popout && nextProps.popout !== this.props.popout) {\n        this.context.isWebView && this.closeUIPopout();\n        this.renderPopout(nextProps);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var Component = this.props.component;\n      return React.createElement(Component, _extends({}, removeObjectKeys(this.props, ['popout']), {\n        popout: this.state.popout\n      }));\n    }\n  }]);\n\n  return NativePopouts;\n}(React.Component);\n\n_defineProperty(NativePopouts, \"propTypes\", {\n  popout: PropTypes.oneOfType([PropTypes.shape({\n    style: PropTypes.oneOf(['alert', 'actionSheet']).isRequired,\n    title: PropTypes.string,\n    text: PropTypes.string,\n    onClose: PropTypes.func.isRequired,\n    actions: PropTypes.arrayOf(PropTypes.shape({\n      style: PropTypes.oneOf(['cancel', 'default', 'destructive']),\n      title: PropTypes.string,\n      action: PropTypes.func\n    }))\n  }), PropTypes.element]),\n  vkuiConnect: PropTypes.object.isRequired,\n\n  /**\n   * Root or View\n   */\n  component: PropTypes.func.isRequired\n});\n\n_defineProperty(NativePopouts, \"contextTypes\", {\n  isWebView: PropTypes.bool\n});\n\nexport { NativePopouts as default };","map":{"version":3,"sources":["../../../../src/components/NativePopouts/NativePopouts.js"],"names":["str","regex","actionId","NativePopouts","React","Component","popout","PropTypes","style","title","text","onClose","actions","action","func","vkuiConnect","component","isRequired","isWebView","bool","e","message","brToNl","removeObjectKeys","actionsLayout","item","props","autoclose","handler","res","nextProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport removeObjectKeys from '../../lib/removeObjectKeys';\nimport PropTypes from 'prop-types';\nimport Alert from '../Alert/Alert';\nimport ActionSheet from '../ActionSheet/ActionSheet';\nimport ActionSheetItem from '../ActionSheetItem/ActionSheetItem';\n\nfunction brToNl (str = '') {\n  const regex = /<br\\s*\\/?>/gi;\n\n  return str.replace(regex, '\\n');\n}\n\nlet actionId = 1;\n\n/**\n * @deprecated будет удален в 3.0.0\n */\nexport default class NativePopouts extends React.Component {\n  state = {\n    popout: null\n  };\n\n  actions = [];\n  actionsStore = {};\n\n  static propTypes = {\n    popout: PropTypes.oneOfType([\n      PropTypes.shape({\n        style: PropTypes.oneOf(['alert', 'actionSheet']).isRequired,\n        title: PropTypes.string,\n        text: PropTypes.string,\n        onClose: PropTypes.func.isRequired,\n        actions: PropTypes.arrayOf(PropTypes.shape({\n          style: PropTypes.oneOf(['cancel', 'default', 'destructive']),\n          title: PropTypes.string,\n          action: PropTypes.func\n        }))\n      }),\n      PropTypes.element\n    ]),\n    vkuiConnect: PropTypes.object.isRequired,\n    /**\n     * Root or View\n     */\n    component: PropTypes.func.isRequired\n  };\n\n  static contextTypes = {\n    isWebView: PropTypes.bool\n  };\n\n  componentDidMount () {\n    this.props.vkuiConnect.subscribe(this.vkuiListener);\n    if (this.props.popout) {\n      this.renderPopout(this.props);\n    }\n  }\n\n  componentWillUnmount () {\n    this.props.vkuiConnect.unsubscribe(this.vkuiListener);\n  }\n\n  vkuiListener = (e) => {\n    if (e.type === 'VKWebAppEvent' && e.detail && e.detail.action) {\n      if (this.actionsStore.hasOwnProperty(e.detail.action)) {\n        this.actionsStore[e.detail.action](e.detail);\n        this.props.popout && this.props.popout.onClose && this.props.popout.onClose();\n      }\n    }\n  };\n\n  renderNativeAlert (popout) {\n    const { style, title, text: message } = popout;\n    this.props.vkuiConnect.send('VKWebAppAlert', {\n      style,\n      title: brToNl(title),\n      message: brToNl(message),\n      actions: this.actions.map(item =>\n        removeObjectKeys(item, ['action'])\n      )\n    });\n  }\n\n  renderUIAlert (popout) {\n    const { title, text, onClose, actionsLayout } = popout;\n    this.setState({\n      popout: (<Alert\n        actions={this.actions.map(item => removeObjectKeys(item, ['params']))}\n        onClose={onClose}\n        actionsLayout={actionsLayout}\n      >\n        {title && <h2>{title}</h2>}\n        {text && <p>{text}</p>}\n      </Alert>)\n    });\n  }\n\n  renderNativeSheet (popout) {\n    const { style } = popout;\n    this.props.vkuiConnect.send('VKWebAppAlert', {\n      style,\n      actions: this.actions.map(item => removeObjectKeys(item, ['action']))\n    });\n  }\n\n  renderUISheet (popout) {\n    const { title, text, onClose } = popout;\n    this.setState({\n      popout: (\n        <ActionSheet title={title} text={text} onClose={onClose}>\n          {this.actions.map((item, index) => (\n            <ActionSheetItem autoclose={item.autoclose} theme={item.style} onClick={item.action} key={`${index}`}>\n              {item.title}\n            </ActionSheetItem>\n          ))}\n        </ActionSheet>\n      )\n    });\n  }\n\n  closeUIPopout () {\n    this.setState({ popout: null });\n  }\n\n  renderPopout (props) {\n    if (props.popout.style) {\n      this.actions = props.popout.actions.map((item) => ({\n        ...item,\n        autoclose: item.hasOwnProperty('autoclose') ? item.autoclose : true,\n        action: item.action || props.popout.onClose,\n        handler: { ...item.params, action: `action-${actionId++}` }\n      }));\n\n      this.actionsStore = this.actions.reduce((res, item) => { res[item.handler.action] = item.action; return res; }, {});\n\n      switch (props.popout.style) {\n        case 'alert':\n          this.context.isWebView ? this.renderNativeAlert(props.popout) : this.renderUIAlert(props.popout);\n          break;\n        case 'actionSheet':\n          this.context.isWebView ? this.renderNativeSheet(props.popout) : this.renderUISheet(props.popout);\n          break;\n      }\n    } else {\n      this.setState({ popout: props.popout });\n    }\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (!nextProps.popout && this.props.popout) {\n      this.closeUIPopout();\n    }\n    if (nextProps.popout && nextProps.popout !== this.props.popout) {\n      this.context.isWebView && this.closeUIPopout();\n      this.renderPopout(nextProps);\n    }\n  }\n\n  render () {\n    let Component = this.props.component;\n    return <Component {...removeObjectKeys(this.props, ['popout'])} popout={this.state.popout} />;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}