{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport HeaderButton from '../HeaderButton/HeaderButton';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Search from '@vkontakte/icons/dist/24/search';\nvar baseClassName = getClassName('Search');\n\nvar SearchAndroid =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SearchAndroid, _React$Component);\n\n  function SearchAndroid(props) {\n    var _this;\n\n    _classCallCheck(this, SearchAndroid);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchAndroid).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      if (!_this.isControlledOutside) {\n        _this.setState({\n          value: ''\n        });\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange('');\n      }\n\n      _this.inputEl.focus();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      if (!_this.isControlledOutside) {\n        _this.setState({\n          value: e.target.value\n        });\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(e.target.value, e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputRef\", function (element) {\n      _this.inputEl = element;\n      var getRef = _this.props.getRef;\n\n      if (getRef) {\n        if (typeof getRef === 'function') {\n          getRef(element);\n        } else {\n          getRef.current = element;\n        }\n      }\n    });\n\n    var state = {};\n\n    if (props.hasOwnProperty('value')) {\n      _this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n\n    _this.state = state;\n    return _this;\n  }\n\n  _createClass(SearchAndroid, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.theme === 'header' && this.props.autoFocus && this.inputEl.focus();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          getRef = _this$props.getRef,\n          value = _this$props.value,\n          defaultValue = _this$props.defaultValue,\n          onChange = _this$props.onChange,\n          onClose = _this$props.onClose,\n          theme = _this$props.theme,\n          autoFocus = _this$props.autoFocus,\n          inputProps = _objectWithoutProperties(_this$props, [\"getRef\", \"value\", \"defaultValue\", \"onChange\", \"onClose\", \"theme\", \"autoFocus\"]);\n\n      var hasValue = !!this.value;\n      var className = classNames(baseClassName, \"Search--\".concat(theme), {\n        'Search--has-value': hasValue,\n        'Search--vkapps': this.context.webviewType === 'vkapps'\n      }, this.props.className);\n      return React.createElement(\"div\", {\n        className: className\n      }, React.createElement(\"div\", {\n        className: \"Search__container\"\n      }, React.createElement(\"div\", {\n        className: \"Search__before\"\n      }, theme === 'default' && React.createElement(Icon24Search, null), theme === 'header' && React.createElement(HeaderButton, {\n        onClick: onClose\n      }, React.createElement(Icon24Back, null))), React.createElement(\"div\", {\n        className: \"Search__control\"\n      }, React.createElement(\"input\", _extends({}, inputProps, {\n        className: \"Search__input\",\n        ref: this.inputRef,\n        value: this.value,\n        onChange: this.onChange\n      }))), hasValue && React.createElement(\"div\", {\n        className: \"Search__after\"\n      }, theme === 'default' && React.createElement(Icon24Cancel, {\n        onClick: this.onCancel\n      }), theme === 'header' && React.createElement(HeaderButton, {\n        onClick: this.onCancel\n      }, React.createElement(Icon24Cancel, null)))));\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.isControlledOutside ? this.props.value : this.state.value;\n    }\n  }]);\n\n  return SearchAndroid;\n}(React.Component);\n\n_defineProperty(SearchAndroid, \"propTypes\", {\n  className: PropTypes.string,\n  defaultValue: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onClose: PropTypes.func,\n  placeholder: PropTypes.node,\n  theme: PropTypes.oneOf(['header', 'default']),\n  getRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.any\n  })]),\n  autoFocus: PropTypes.bool\n});\n\n_defineProperty(SearchAndroid, \"defaultProps\", {\n  placeholder: 'Поиск',\n  theme: 'default',\n  autoFocus: true\n});\n\n_defineProperty(SearchAndroid, \"contextTypes\", {\n  webviewType: PropTypes.oneOf(['vkapps', 'internal'])\n});\n\nexport { SearchAndroid as default };","map":{"version":3,"sources":["../../../../src/components/SearchAndroid/SearchAndroid.js"],"names":["baseClassName","getClassName","SearchAndroid","React","Component","state","props","className","PropTypes","defaultValue","value","onChange","onFocus","onBlur","onClose","placeholder","theme","getRef","current","any","autoFocus","bool","webviewType","e","inputProps","hasValue","classNames","onCancel"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\n\nimport HeaderButton from '../HeaderButton/HeaderButton';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Search from '@vkontakte/icons/dist/24/search';\n\nconst baseClassName = getClassName('Search');\n\nexport default class SearchAndroid extends React.Component {\n  constructor (props) {\n    super(props);\n\n    let state = {};\n\n    if (props.hasOwnProperty('value')) {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n\n    this.state = state;\n  }\n\n  static propTypes = {\n    className: PropTypes.string,\n    defaultValue: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onClose: PropTypes.func,\n    placeholder: PropTypes.node,\n    theme: PropTypes.oneOf(['header', 'default']),\n    getRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.any })\n    ]),\n    autoFocus: PropTypes.bool\n  };\n\n  static defaultProps = {\n    placeholder: 'Поиск',\n    theme: 'default',\n    autoFocus: true\n  };\n\n  static contextTypes = {\n    webviewType: PropTypes.oneOf(['vkapps', 'internal'])\n  };\n\n  onCancel = () => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: '' });\n    }\n    if (this.props.onChange) {\n      this.props.onChange('');\n    }\n    this.inputEl.focus();\n  };\n\n  onChange = (e) => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.target.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e.target.value, e);\n    }\n  };\n\n  componentDidMount () {\n    this.props.theme === 'header' && this.props.autoFocus && this.inputEl.focus();\n  }\n\n  get value () {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  inputRef = (element) => {\n    this.inputEl = element;\n\n    const getRef = this.props.getRef;\n\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const { getRef, value, defaultValue, onChange, onClose, theme, autoFocus, ...inputProps } = this.props;\n    const hasValue = !!this.value;\n\n    const className = classNames(baseClassName, `Search--${theme}`, {\n      'Search--has-value': hasValue,\n      'Search--vkapps': this.context.webviewType === 'vkapps'\n    }, this.props.className);\n\n    return (\n      <div className={className}>\n        <div className=\"Search__container\">\n          <div className=\"Search__before\">\n            {theme === 'default' && <Icon24Search/>}\n            {theme === 'header' && <HeaderButton onClick={onClose}><Icon24Back/></HeaderButton>}\n          </div>\n          <div className=\"Search__control\">\n            <input\n              {...inputProps}\n              className=\"Search__input\"\n              ref={this.inputRef}\n              value={this.value}\n              onChange={this.onChange}\n            />\n          </div>\n          {hasValue &&\n          <div className=\"Search__after\">\n            {theme === 'default' && <Icon24Cancel onClick={this.onCancel}/>}\n            {theme === 'header' && <HeaderButton onClick={this.onCancel}><Icon24Cancel/></HeaderButton>}\n          </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}