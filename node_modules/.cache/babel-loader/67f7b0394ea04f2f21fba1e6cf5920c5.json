{"ast":null,"code":"import _classCallCheck from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/spbiphones/Dropbox/projects/web projects/podcasts/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import pickture from\"../../resources/icons/pickture.svg\";import dismiss from\"../../resources/icons/dismiss.svg\";import{FormLayout,File}from'@vkontakte/vkui';var img=new Image();var fr=new FileReader();var PhotoPicker=/*#__PURE__*/function(_React$Component){_inherits(PhotoPicker,_React$Component);function PhotoPicker(props){var _this;_classCallCheck(this,PhotoPicker);_this=_possibleConstructorReturn(this,_getPrototypeOf(PhotoPicker).call(this,props));_this.showImage=function(file){fr.onload=_this.onLoadedFileReader;fr.readAsDataURL(file);};_this.onLoadedFileReader=function(){img.onload=_this.onImgLoaded;img.src=fr.result;};_this.onImgLoaded=function(){_this.setState({pickedImageSrc:img.src});_this.props.photoPicked(img.src);};_this.state={pickedImageSrc:undefined};_this.fileUpload=React.createRef();_this.pickImage=_this.pickImage.bind(_assertThisInitialized(_this));_this.fileChangedHandler=_this.fileChangedHandler.bind(_assertThisInitialized(_this));_this.onDismiss=_this.onDismiss.bind(_assertThisInitialized(_this));return _this;}_createClass(PhotoPicker,[{key:\"pickImage\",value:function pickImage(){this.fileUpload.current.click();}},{key:\"fileChangedHandler\",value:function fileChangedHandler(event){if(event&&event.target.files&&event.target.files.length>0){this.showImage(event.target.files[0]);}}},{key:\"onDismiss\",value:function onDismiss(){this.setState({pickedImageSrc:undefined});this.props.photoPicked(undefined);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"photo_picker_container\"},React.createElement(\"input\",{id:\"fileInput\",className:\"custom-file-input hover\",type:\"file\",accept:\"image/*\",onChange:this.fileChangedHandler,style:{display:\"none\"},ref:this.fileUpload}),this.state.pickedImageSrc==undefined?React.createElement(\"div\",{onClick:this.pickImage,className:\"photo_picker\"},React.createElement(\"div\",{className:\"center flex\"},React.createElement(\"img\",{src:pickture}),React.createElement(\"p\",{className:\"photo_text\"},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u043E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0443\"))):React.createElement(\"div\",{className:\"picked_img_container\"},React.createElement(\"img\",{className:\"picked_image\",src:this.state.pickedImageSrc}),React.createElement(\"div\",{onClick:this.onDismiss,className:\"dismiss_container\"},React.createElement(\"img\",{className:\"dismiss_img\",src:dismiss}))));}}]);return PhotoPicker;}(React.Component);export default PhotoPicker;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/PhotoPicker.js"],"names":["React","FormLayout","File","img","Image","fr","FileReader","PhotoPicker","props","showImage","file","onload","onLoadedFileReader","readAsDataURL","onImgLoaded","src","result","setState","pickedImageSrc","photoPicked","state","undefined","fileUpload","createRef","pickImage","bind","fileChangedHandler","onDismiss","current","click","event","target","files","length","display","pickture","dismiss","Component"],"mappings":"g2BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,gHAGA,OAASC,UAAT,CAAqBC,IAArB,KAAgC,iBAAhC,CACA,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,KAAJ,EAAV,CACA,GAAIC,CAAAA,EAAE,CAAG,GAAIC,CAAAA,UAAJ,EAAT,C,GACMC,CAAAA,W,iFAEF,qBAAYC,KAAZ,CAAkB,6CACd,6EAAMA,KAAN,GADc,MAkBlBC,SAlBkB,CAkBN,SAACC,IAAD,CAAU,CAClBL,EAAE,CAACM,MAAH,CAAY,MAAKC,kBAAjB,CACAP,EAAE,CAACQ,aAAH,CAAiBH,IAAjB,EACH,CArBiB,OAsBlBE,kBAtBkB,CAsBG,UAAM,CACvBT,GAAG,CAACQ,MAAJ,CAAa,MAAKG,WAAlB,CACAX,GAAG,CAACY,GAAJ,CAAUV,EAAE,CAACW,MAAb,CACH,CAzBiB,OA0BlBF,WA1BkB,CA0BJ,UAAM,CAChB,MAAKG,QAAL,CAAc,CAACC,cAAc,CAAGf,GAAG,CAACY,GAAtB,CAAd,EACA,MAAKP,KAAL,CAAWW,WAAX,CAAuBhB,GAAG,CAACY,GAA3B,EACH,CA7BiB,CAEd,MAAKK,KAAL,CAAa,CACTF,cAAc,CAAGG,SADR,CAAb,CAGA,MAAKC,UAAL,CAAkBtB,KAAK,CAACuB,SAAN,EAAlB,CACA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeC,IAAf,+BAAjB,CACA,MAAKC,kBAAL,CAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,+BAA1B,CACA,MAAKE,SAAL,CAAiB,MAAKA,SAAL,CAAeF,IAAf,+BAAjB,CARc,aASjB,C,qEACW,CACR,KAAKH,UAAL,CAAgBM,OAAhB,CAAwBC,KAAxB,GACH,C,8DACkBC,K,CAAO,CACtB,GAAGA,KAAK,EAAIA,KAAK,CAACC,MAAN,CAAaC,KAAtB,EAA+BF,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAAnB,CAA4B,CAA9D,CAAgE,CAC5D,KAAKxB,SAAL,CAAeqB,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAf,EACH,CACJ,C,6CAaU,CACP,KAAKf,QAAL,CAAc,CAACC,cAAc,CAAGG,SAAlB,CAAd,EACA,KAAKb,KAAL,CAAWW,WAAX,CAAuBE,SAAvB,EACH,C,uCACQ,CACL,MACI,4BAAK,SAAS,CAAC,wBAAf,EAMG,6BAAO,EAAE,CAAC,WAAV,CAAsB,SAAS,CAAC,yBAAhC,CAA0D,IAAI,CAAC,MAA/D,CAAsE,MAAM,CAAC,SAA7E,CAAuF,QAAQ,CAAE,KAAKK,kBAAtG,CAA0H,KAAK,CAAE,CAAEQ,OAAO,CAAE,MAAX,CAAjI,CAAsJ,GAAG,CAAE,KAAKZ,UAAhK,EANH,CAOI,KAAKF,KAAL,CAAWF,cAAX,EAA6BG,SAA7B,CAAyC,2BAAK,OAAO,CAAE,KAAKG,SAAnB,CAA8B,SAAS,CAAC,cAAxC,EACrC,2BAAK,SAAS,CAAC,aAAf,EACI,2BAAK,GAAG,CAAEW,QAAV,EADJ,CAEI,yBAAG,SAAS,CAAC,YAAb,sGAFJ,CADqC,CAAzC,CAMD,2BAAK,SAAS,CAAC,sBAAf,EACK,2BAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAE,KAAKf,KAAL,CAAWF,cAA9C,EADL,CAEK,2BAAK,OAAO,CAAE,KAAKS,SAAnB,CAA8B,SAAS,CAAC,mBAAxC,EACI,2BAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAES,OAAlC,EADJ,CAFL,CAbH,CADJ,CAsBH,C,yBA3DqBpC,KAAK,CAACqC,S,EA6DhC,cAAe9B,CAAAA,WAAf","sourcesContent":["import React from 'react';\nimport pickture from '../../resources/icons/pickture.svg'\nimport dismiss from '../../resources/icons/dismiss.svg'\nimport { FormLayout, File} from '@vkontakte/vkui';\nvar img = new Image; \nvar fr = new FileReader;\nclass PhotoPicker extends React.Component {\n   \n    constructor(props){\n        super(props)\n        this.state = {\n            pickedImageSrc : undefined\n        }\n        this.fileUpload = React.createRef();\n        this.pickImage = this.pickImage.bind(this);\n        this.fileChangedHandler = this.fileChangedHandler.bind(this);\n        this.onDismiss = this.onDismiss.bind(this);\n    }\n    pickImage() {\n        this.fileUpload.current.click();\n    }\n    fileChangedHandler(event) {\n        if(event && event.target.files && event.target.files.length > 0){\n            this.showImage(event.target.files[0])\n        }\n    }\n    showImage = (file) => {\n        fr.onload = this.onLoadedFileReader\n        fr.readAsDataURL(file);\n    }\n    onLoadedFileReader = () => {\n        img.onload = this.onImgLoaded\n        img.src = fr.result;\n    }\n    onImgLoaded = () => {\n        this.setState({pickedImageSrc : img.src})\n        this.props.photoPicked(img.src)\n    }\n    onDismiss(){\n        this.setState({pickedImageSrc : undefined})\n        this.props.photoPicked(undefined)\n    }\n    render() {\n        return (\n            <div className=\"photo_picker_container\">\n                {/* <FormLayout>\n        <File>\n        \n        </File>\n      </FormLayout> */}\n               <input id=\"fileInput\" className=\"custom-file-input hover\" type=\"file\" accept=\"image/*\" onChange={this.fileChangedHandler} style={{ display: \"none\" }} ref={this.fileUpload}/>\n               {this.state.pickedImageSrc == undefined ? <div onClick={this.pickImage} className=\"photo_picker\">\n                    <div className=\"center flex\">\n                        <img src={pickture}/>\n                        <p className=\"photo_text\">Загрузить обложку</p>\n                    </div>\n               </div> : \n               <div className=\"picked_img_container\">\n                    <img className=\"picked_image\" src={this.state.pickedImageSrc}/>\n                    <div onClick={this.onDismiss} className=\"dismiss_container\">\n                        <img className=\"dismiss_img\" src={dismiss}/>\n                    </div>\n               </div>}\n            </div>\n        );\n    }\n}\nexport default PhotoPicker;"]},"metadata":{},"sourceType":"module"}