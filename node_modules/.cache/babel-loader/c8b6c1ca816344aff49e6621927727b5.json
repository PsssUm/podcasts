{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport Icon16SearchOutline from '@vkontakte/icons/dist/16/search_outline';\nvar baseClassName = getClassName('Search');\nvar searchId = 0;\n\nvar SearchIOS =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SearchIOS, _React$Component);\n\n  function SearchIOS(props) {\n    var _this;\n\n    _classCallCheck(this, SearchIOS);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchIOS).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function (e) {\n      _this.setState({\n        focused: true\n      });\n\n      _this.props.onFocus && _this.props.onFocus(e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function (e) {\n      _this.setState({\n        focused: false\n      });\n\n      _this.props.onBlur && _this.props.onBlur(e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      if (!_this.isControlledOutside) {\n        _this.setState({\n          value: e.target.value\n        });\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(e.target.value, e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      if (!_this.isControlledOutside) {\n        _this.setState({\n          value: ''\n        });\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange('');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputRef\", function (element) {\n      var getRef = _this.props.getRef;\n\n      if (getRef) {\n        if (typeof getRef === 'function') {\n          getRef(element);\n        } else {\n          getRef.current = element;\n        }\n      }\n    });\n\n    var state = {\n      showAfter: false,\n      focused: false,\n      placeholderOffset: null,\n      afterWidth: null\n    };\n\n    if (props.hasOwnProperty('value')) {\n      _this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n\n    searchId++;\n    _this.state = state;\n    return _this;\n  }\n\n  _createClass(SearchIOS, [{\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n\n      var _this$props = this.props,\n          className = _this$props.className,\n          theme = _this$props.theme,\n          onFocus = _this$props.onFocus,\n          onBlur = _this$props.onBlur,\n          onChange = _this$props.onChange,\n          defaultValue = _this$props.defaultValue,\n          value = _this$props.value,\n          placeholder = _this$props.placeholder,\n          after = _this$props.after,\n          getRef = _this$props.getRef,\n          inputProps = _objectWithoutProperties(_this$props, [\"className\", \"theme\", \"onFocus\", \"onBlur\", \"onChange\", \"defaultValue\", \"value\", \"placeholder\", \"after\", \"getRef\"]);\n\n      return React.createElement(\"div\", {\n        className: classNames(baseClassName, (_classNames = {}, _defineProperty(_classNames, \"Search--\".concat(theme), true), _defineProperty(_classNames, 'Search--focused', this.state.focused), _defineProperty(_classNames, 'Search--has-value', this.value), _defineProperty(_classNames, 'Search--has-after', after), _classNames), className)\n      }, React.createElement(\"div\", {\n        className: \"Search__in\"\n      }, React.createElement(\"div\", {\n        className: \"Search__width\"\n      }), React.createElement(\"div\", {\n        className: \"Search__control\"\n      }, React.createElement(\"input\", _extends({}, inputProps, {\n        id: \"search-\".concat(searchId),\n        ref: this.inputRef,\n        type: \"text\",\n        className: \"Search__input\",\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onChange: this.onChange,\n        value: this.value\n      })), after && React.createElement(\"div\", {\n        className: \"Search__after-width\"\n      }, after), React.createElement(\"label\", {\n        className: \"Search__placeholder\",\n        htmlFor: \"search-\".concat(searchId)\n      }, React.createElement(\"div\", {\n        className: \"Search__placeholder-in\"\n      }, React.createElement(Icon16SearchOutline, null), React.createElement(\"div\", {\n        className: \"Search__placeholder-text\",\n        dangerouslySetInnerHTML: {\n          __html: placeholder\n        }\n      })))), after && React.createElement(\"div\", {\n        className: \"Search__after\",\n        onClick: this.onCancel\n      }, React.createElement(\"div\", {\n        className: \"Search__after-in\"\n      }, after))));\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.isControlledOutside ? this.props.value : this.state.value;\n    }\n  }]);\n\n  return SearchIOS;\n}(React.Component);\n\n_defineProperty(SearchIOS, \"propTypes\", {\n  className: PropTypes.string,\n  after: PropTypes.node,\n  defaultValue: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  placeholder: PropTypes.node,\n  theme: PropTypes.oneOf(['header', 'default']),\n  getRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.any\n  })])\n});\n\n_defineProperty(SearchIOS, \"defaultProps\", {\n  after: 'Отменить',\n  theme: 'default',\n  placeholder: 'Поиск'\n});\n\nexport { SearchIOS as default };","map":{"version":3,"sources":["../../../../src/components/SearchIOS/SearchIOS.js"],"names":["baseClassName","getClassName","searchId","SearchIOS","React","Component","state","showAfter","focused","placeholderOffset","afterWidth","props","className","PropTypes","after","defaultValue","value","onChange","onFocus","onBlur","placeholder","theme","getRef","current","any","e","inputProps","classNames","__html","onCancel"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport Icon16SearchOutline from '@vkontakte/icons/dist/16/search_outline';\n\nconst baseClassName = getClassName('Search');\n\nlet searchId = 0;\n\nexport default class SearchIOS extends React.Component {\n  constructor (props) {\n    super(props);\n\n    let state = {\n      showAfter: false,\n      focused: false,\n      placeholderOffset: null,\n      afterWidth: null\n    };\n\n    if (props.hasOwnProperty('value')) {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n    searchId++;\n    this.state = state;\n  }\n\n  static propTypes = {\n    className: PropTypes.string,\n    after: PropTypes.node,\n    defaultValue: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    placeholder: PropTypes.node,\n    theme: PropTypes.oneOf(['header', 'default']),\n    getRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.any })\n    ])\n  };\n\n  static defaultProps = {\n    after: 'Отменить',\n    theme: 'default',\n    placeholder: 'Поиск'\n  };\n\n  get value () {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  onFocus = (e) => {\n    this.setState({ focused: true });\n    this.props.onFocus && this.props.onFocus(e);\n  };\n\n  onBlur = (e) => {\n    this.setState({ focused: false });\n    this.props.onBlur && this.props.onBlur(e);\n  };\n\n  onChange = (e) => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.target.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e.target.value, e);\n    }\n  };\n\n  onCancel = () => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: '' });\n    }\n    if (this.props.onChange) {\n      this.props.onChange('');\n    }\n  };\n\n  inputRef = (element) => {\n    const getRef = this.props.getRef;\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const {\n      className,\n      theme,\n      onFocus,\n      onBlur,\n      onChange,\n      defaultValue,\n      value,\n      placeholder,\n      after,\n      getRef,\n      ...inputProps\n    } = this.props;\n\n    return (\n      <div className={classNames(baseClassName, {\n        [`Search--${theme}`]: true,\n        'Search--focused': this.state.focused,\n        'Search--has-value': this.value,\n        'Search--has-after': after\n      }, className)}>\n        <div className=\"Search__in\">\n          <div className=\"Search__width\" />\n          <div className=\"Search__control\">\n            <input\n              {...inputProps}\n              id={`search-${searchId}`}\n              ref={this.inputRef}\n              type=\"text\"\n              className=\"Search__input\"\n              onFocus={this.onFocus}\n              onBlur={this.onBlur}\n              onChange={this.onChange}\n              value={this.value}\n            />\n            {after && <div className=\"Search__after-width\">{after}</div>}\n            <label\n              className=\"Search__placeholder\"\n              htmlFor={`search-${searchId}`}\n            >\n              <div className=\"Search__placeholder-in\">\n                <Icon16SearchOutline />\n                <div className=\"Search__placeholder-text\" dangerouslySetInnerHTML={{ __html: placeholder }} />\n              </div>\n            </label>\n          </div>\n          {after &&\n          <div className=\"Search__after\" onClick={this.onCancel}>\n            <div className=\"Search__after-in\">{after}</div>\n          </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}