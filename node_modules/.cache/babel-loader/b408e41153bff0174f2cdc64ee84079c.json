{"ast":null,"code":"var _jsxFileName = \"/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/PhotoPicker.js\";\nimport React from 'react';\nimport pickture from \"../../resources/icons/pickture.svg\";\nimport { FormLayout, File } from '@vkontakte/vkui';\nvar img = new Image();\nvar fr = new FileReader();\n\nclass PhotoPicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showImage = file => {\n      fr.onload = this.onLoadedFileReader;\n      fr.readAsDataURL(file);\n    };\n\n    this.onLoadedFileReader = () => {\n      img.onload = this.onImgLoaded;\n      img.src = fr.result;\n    };\n\n    this.onImgLoaded = () => {\n      this.setState({\n        pickedImageSrc: img.src\n      });\n      this.props.photoPicked(img.src);\n    };\n\n    this.state = {\n      pickedImageSrc: undefined\n    };\n    this.fileUpload = React.createRef();\n    this.pickImage = this.pickImage.bind(this);\n    this.fileChangedHandler = this.fileChangedHandler.bind(this);\n    this.onDismiss = this.onDismiss.bind(this);\n  }\n\n  pickImage() {\n    this.fileUpload.current.click();\n  }\n\n  fileChangedHandler(event) {\n    if (event && event.target.files && event.target.files.length > 0) {\n      this.showImage(event.target.files[0]);\n    }\n  }\n\n  onDismiss() {\n    this.setState({\n      pickedImageSrc: undefined\n    });\n    this.props.photoPicked(undefined);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"details_image_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, this.state.pickedImageSrc == undefined ? React.createElement(\"img\", {\n      className: \"center\",\n      src: pickture,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }) : React.createElement(\"img\", {\n      className: \"picked_image\",\n      src: this.state.pickedImageSrc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"fileInput\",\n      className: \"custom-file-input hover\",\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: this.fileChangedHandler,\n      style: {\n        display: \"none\"\n      },\n      ref: this.fileUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default PhotoPicker;","map":{"version":3,"sources":["/Users/spbiphones/Dropbox/projects/web projects/podcasts/src/pages/custom_views/PhotoPicker.js"],"names":["React","FormLayout","File","img","Image","fr","FileReader","PhotoPicker","Component","constructor","props","showImage","file","onload","onLoadedFileReader","readAsDataURL","onImgLoaded","src","result","setState","pickedImageSrc","photoPicked","state","undefined","fileUpload","createRef","pickImage","bind","fileChangedHandler","onDismiss","current","click","event","target","files","length","render","pickture","display"],"mappings":"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","sourcesContent":["import React from 'react';\nimport pickture from '../../resources/icons/pickture.svg'\nimport { FormLayout, File} from '@vkontakte/vkui';\nvar img = new Image; \nvar fr = new FileReader;\nclass PhotoPicker extends React.Component {\n   \n    constructor(props){\n        super(props)\n        this.state = {\n            pickedImageSrc : undefined\n        }\n        this.fileUpload = React.createRef();\n        this.pickImage = this.pickImage.bind(this);\n        this.fileChangedHandler = this.fileChangedHandler.bind(this);\n        this.onDismiss = this.onDismiss.bind(this);\n    }\n    pickImage() {\n        this.fileUpload.current.click();\n    }\n    fileChangedHandler(event) {\n        if(event && event.target.files && event.target.files.length > 0){\n            this.showImage(event.target.files[0])\n        }\n    }\n    showImage = (file) => {\n        fr.onload = this.onLoadedFileReader\n        fr.readAsDataURL(file);\n    }\n    onLoadedFileReader = () => {\n        img.onload = this.onImgLoaded\n        img.src = fr.result;\n    }\n    onImgLoaded = () => {\n        this.setState({pickedImageSrc : img.src})\n        this.props.photoPicked(img.src)\n    }\n    onDismiss(){\n        this.setState({pickedImageSrc : undefined})\n        this.props.photoPicked(undefined)\n    }\n    render() {\n        return (\n            <div className=\"details_image_container\">\n                {this.state.pickedImageSrc == undefined ? <img className=\"center\" src={pickture}/> : \n                <img className=\"picked_image\" src={this.state.pickedImageSrc} />}\n                <input id=\"fileInput\" className=\"custom-file-input hover\" type=\"file\" accept=\"image/*\" onChange={this.fileChangedHandler} style={{ display: \"none\" }} ref={this.fileUpload}/>\n\n            </div>\n        );\n    }\n}\nexport default PhotoPicker;"]},"metadata":{},"sourceType":"module"}